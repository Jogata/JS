<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX | XMLHttpRequest</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Kaushan+Script&display=swap');
body {
  font-family: 'Kaushan Script', cursive;
  background-image: url("./img/pexels-lukas-628241.jpg");
  background-attachment: fixed;
  background-size: cover;
}

#wrapper {
  margin-top: 100px;
  display: flex;
  justify-content: center;
  flex-direction: row;
  gap: 30px;
}

#form, 
#first-field, 
#second-field, 
#third-field {
  width: 450px;
  height: 215px;
  margin: 20px;
  border-radius: 10px;
  display: flex;
  justify-content: start;
  align-items: center;
  flex-direction: column;
  background-color: rgba(240, 248, 255, 0.753);
  -webkit-box-shadow: 6px 19px 16px 5px rgba(0,0,0,0.58); 
  box-shadow: 6px 19px 16px 5px rgba(0,0,0,0.58);
}
#form > p, 
#first-field > p, 
#second-field > p, 
#third-field > p {
  font-size: 16px;
  font-weight: 800;
  border-bottom: 1px solid black;
}

body > h1{
  margin-bottom: -105px;
  font-size: 50px;
  text-align: center;
}

form {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 8px;
}

#add-btn, 
.edit-btn, 
.continue-btn, 
.finished-btn,
#clear {
  border: none;
  border-radius: 3px;
  font-family: 'Kaushan Script', cursive;
  background-color: bisque;
  -webkit-box-shadow: 0px 0px 27px -2px #000000; 
  box-shadow: 0px 0px 27px -2px #000000;
}
.edit-btn, 
.continue-btn{
  margin-right: 20px;
  scale: 1.2;
}
#add-btn:hover, 
.edit-btn:hover, 
.continue-btn:hover , 
#clear:hover {
  color: white;
  background-color: chocolate;
}

#add-btn:disabled {
  background-color: gray;
  cursor: not-allowed;
}

input {
  width: 200px;
  border-radius: 3px;
  background-color: beige;
}
#email {
  width: 183px;
}

#time, 
#date {
  width: 95px;
}

.event-content{
    list-style-type: none;
    margin-top: -50px;
}

article {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    width: 400px;
    flex-wrap: wrap;
}

  @media (max-width: 1000px) {
    #wrapper {
      flex-direction: column;
    }
  }
    </style>
  </head>
  <body>
    <!-- <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1> -->

        <h1>Autumn Adventures</h1>
    <div id="wrapper">
      <div class="content-first">
        <div id="form">
          <p>Add Autumn Event</p>
        <form>
          <div>
            <label for="time">When:</label>
            <input id="time" type="time">
            <input id="date" type="date">
          </div>
          <div>
            <label for="place">Place:</label>
            <input id="place" type="text" placeholder="Place">
          </div>
          <div>
            <label for="event-name">Event:</label>
            <input id="event-name" type="text" placeholder="Event Name">
          </div>
          <div>
            <label for="email">Contacts:</label>
            <input id="email" type="email" placeholder="Email">
          </div>
         
          <input id="add-btn" type="button" value="Add Event">
        </form>
        </div>
        <div id="first-field">
          <p>Upcoming</p>
          <ul id="upcoming-list"></ul>
        </div>
      </div>
      <div class="content-second">
        <div id="second-field">
          <p>Last Check</p>
          <ul id="check-list"></ul>
        </div>
        <div id="third-field">
          <p>Finished</p>
          <ul id="finished-list"></ul>
          <button id="clear">Clear</button>
        </div>
      </div>
    </div>
    <script>
      window.addEventListener('load', solve);

function solve() {
    const form = document.querySelector("form");
    const upcomingList = document.getElementById("upcoming-list");
    const checkList = document.getElementById("check-list");
    const finishedList = document.getElementById("finished-list");
    // console.log(form, upcomingList, checkList, finishedList);
    const timeInput = document.getElementById("time");
    const dateInput = document.getElementById("date");
    const placeInput = document.getElementById("place");
    const eventInput = document.getElementById("event-name");
    const emailInput = document.getElementById("email");
    // console.log(timeInput, dateInput, placeInput, eventInput, emailInput);
    const addBtn = document.getElementById("add-btn");

    // timeInput.value = "19:00";
    // dateInput.value = "2020-01-01";
    // placeInput.value = "test place";
    // eventInput.value = "test event";
    // emailInput.value = "test@abv.bg";

    addBtn.addEventListener("click", (e) => {
        // console.log("get info");
        // e.preventDefault();

        if (timeInput.value.length == 0) {
            return;
        }
        if (dateInput.value.length == 0) {
            return;
        }
        if (placeInput.value.length == 0) {
            return;
        }
        if (eventInput.value.length == 0) {
            return;
        }
        if (emailInput.value.length == 0) {
            return;
        }

        const timeInputValue = timeInput.value;
        const dateInputValue = dateInput.value;
        const placeInputValue = placeInput.value;
        const eventInputValue = eventInput.value;
        const emailInputValue = emailInput.value;
        // console.log(timeInputValue, dateInputValue, placeInputValue, eventInputValue, emailInputValue);
        addBtn.disabled = true;
        form.reset();

        const li = document.createElement("li");
        const html = `<article><p>Begins: ${dateInputValue} at ${timeInputValue}</p><p>In: ${placeInputValue}</p><p>Event: ${eventInputValue}</p><p>Contact: ${emailInputValue}</p></article>`;
        li.innerHTML = html;
        li.classList.add("event-content");
        const editBtn = document.createElement("button");
        editBtn.textContent = "Edit";
        editBtn.classList.add("edit-btn");
        editBtn.addEventListener("click", () => {
            li.remove();
            timeInput.value = timeInputValue;
            dateInput.value = dateInputValue;
            placeInput.value = placeInputValue;
            eventInput.value = eventInputValue;
            emailInput.value = emailInputValue;
            addBtn.disabled = false;
        })
        const continueBtn = document.createElement("button");
        continueBtn.textContent = "Continue";
        continueBtn.classList.add("continue-btn");
        continueBtn.addEventListener("click", () => {
            upcomingList.appendChild(li);
            continueBtn.remove();
            editBtn.remove();
            addBtn.disabled = false;
            const moveBtn = document.createElement("button");
            moveBtn.textContent = "Move to Finished";
            moveBtn.classList.add("finished-btn");
            const buttons = document.querySelectorAll(".finished-btn");
            moveBtn.addEventListener("click", () => {
                finishedList.appendChild(li);
                moveBtn.remove();
                console.log(buttons);
                buttons.forEach(button => {
                    console.log("cclick");
                    button.click()
                });
            })
            li.appendChild(moveBtn);
        });
        li.appendChild(editBtn);
        li.appendChild(continueBtn);
        checkList.appendChild(li);
    })

    const clearBtn = document.getElementById("clear");
    clearBtn.addEventListener("click", () => {
        finishedList.textContent = "";
    })
}
    </script>

    <script>
      // 01. Phone Book

function createPhoneBook(people) {
const book = {};

for (const person of people) {
  const data = person.split(" ");
  const name = data[0];
  const phone = data[1];
  // console.log(name,phone);
  book[name] = phone;
}

// console.log(book);
for (const person in book) {
  const number = book[person];
  console.log(`${person} -> ${number}`);
}

}

// createPhoneBook(['Tim 0834212554', 'Peter 0877547887', 'Bill 0896543112', 'Tim 0876566344']);
// createPhoneBook(['George 0552554', 'Peter 087587', 'George 0453112', 'Bill 0845344']);

      const petAdoptionAgency = {
    isPetAvailable(pet, availableCount, vaccinated) {
      if (typeof pet !== "string" || typeof availableCount !== "number" || typeof vaccinated !== "boolean") {
        throw new Error("Invalid input");
      }

      if (availableCount <= 0) {
        return `Sorry, there are no ${pet}(s) available for adoption at the agency.`;
      } else {
        if(vaccinated){
            return `Great! We have ${availableCount} vaccinated ${pet}(s) available for adoption at the agency.`;
        }else{
            return `Great! We have ${availableCount} ${pet}(s) available for adoption, but they need vaccination.`;
        }
        
      }
    },
    getRecommendedPets(petList, desiredTraits) {
      let recommendedPets = [];
  
      if (!Array.isArray(petList) || typeof desiredTraits !== "string") {
        throw new Error("Invalid input");
      }
  
      petList.forEach((pet) => {
        if (pet.traits === desiredTraits) {
          recommendedPets.push(pet.name);
        }
      });
  
      if (recommendedPets.length === 0) {
        return `Sorry, we currently have no recommended pets with the desired traits: ${desiredTraits}.`;
      } else {
        return `Recommended pets with the desired traits (${desiredTraits}): ${recommendedPets.join(", ")}`;
      }
    },
    adoptPet(pet, adopterName) {
      if (typeof pet !== "string" || typeof adopterName !== "string") {
        throw new Error("Invalid input");
      }
  
      return `Congratulations, ${adopterName}! You have adopted ${pet} from the agency. Enjoy your time with your new furry friend!`;
    },
  };

//   describe('test petAdoptionAgency', function () {
//     it('isPetAvailable functionality', function () {
//         expect(petAdoptionAgency.isPetAvailable("dog", 2, true)).to.equal(`Great! We have 2 vaccinated dog(s) available for adoption at the agency.`);
//     it('isPetAvailable functionality', function () {
//         expect(petAdoptionAgency.isPetAvailable("dog", 2, false)).to.equal(`Great! We have 2 dog(s) available for adoption, but they need vaccination.`);
//     })
//     it('isPetAvailable functionality', function () {
//         expect(petAdoptionAgency.isPetAvailable("dog", 0, false)).to.equal(`Sorry, there are no dog(s) available for adoption at the agency.`);
//     })
//     it('isPetAvailable functionality', function () {
//         expect(() => petAdoptionAgency.isPetAvailable(5, 2, false)).to.throw();
//     })
//     it('isPetAvailable functionality', function () {
//         expect(() => petAdoptionAgency.isPetAvailable("dog", "2", false)).to.throw();
//     })
//     it('isPetAvailable functionality', function () {
//         expect(() => petAdoptionAgency.isPetAvailable("dog", 2, "")).to.throw();
//     })
//     // expect(petAdoptionAgency.isPetAvailable("dog", 2, false)).to.equal(``);
//     })
//     it('getRecommendedPets functionality', function () {
//         expect(() => petAdoptionAgency.getRecommendedPets({}, "desiredTraits")).to.throw();
//     it('getRecommendedPets functionality', function () {
//         expect(() => petAdoptionAgency.getRecommendedPets([], 6)).to.throw();
//     })
//     it('getRecommendedPets functionality', function () {
//         expect(petAdoptionAgency.getRecommendedPets([{traits: "desiredTraits1"}], "desiredTraits2")).to.equal("Sorry, we currently have no recommended pets with the desired traits: desiredTraits2.");
//     })
//     it('getRecommendedPets functionality', function () {
//         expect(petAdoptionAgency.getRecommendedPets([{name: "pesho", traits: "desiredTraits"}], "desiredTraits")).to.equal("Recommended pets with the desired traits (desiredTraits): pesho");
//     })
//     it('getRecommendedPets functionality', function () {
//         expect(petAdoptionAgency.getRecommendedPets([{name: "pesho", traits: "desiredTraits"}, {name: "goho", traits: "desiredTraits2"}, {name: "ivan", traits: "desiredTraits"}], "desiredTraits")).to.equal("Recommended pets with the desired traits (desiredTraits): pesho, ivan");
//     })
//         // expect().to.equal();
//     })
//     it('adoptPet functionality', function () {
//         expect(() => petAdoptionAgency.adoptPet("dog", {})).to.throw();
//     it('adoptPet functionality', function () {
//         expect(() => petAdoptionAgency.adoptPet({}, "ivan")).to.throw();
//     })
//     it('adoptPet functionality', function () {
//         expect(petAdoptionAgency.adoptPet("dog", "ivan")).to.equal("Congratulations, ivan! You have adopted dog from the agency. Enjoy your time with your new furry friend!");
//     })
//     // expect(petAdoptionAgency.adoptPet("dog", "ivan")).to.equal("Congratulations, ivan! You have adopted dog from the agency. Enjoy your time with your new furry friend!");
//     // expect(petAdoptionAgency.adoptPet()).to.equal();
//     })
// })

console.log(petAdoptionAgency.isPetAvailable("dog", 2, true));
console.log(petAdoptionAgency.isPetAvailable("dog", 2, false));
console.log(petAdoptionAgency.isPetAvailable("dog", 0, false));
const dogs = [{traits: "desiredTraits1"}];
console.log(petAdoptionAgency.getRecommendedPets(dogs, "desiredTraits2"));
dogs.push({name: "pesho", traits: "desiredTraits"});
dogs.shift();
console.log(petAdoptionAgency.getRecommendedPets(dogs, "desiredTraits"));
dogs.push({name: "goho", traits: "desiredTraits2"});
dogs.push({name: "ivan", traits: "desiredTraits"});
console.log(petAdoptionAgency.getRecommendedPets([{name: "pesho", traits: "desiredTraits"}, {name: "goho", traits: "desiredTraits2"}, {name: "ivan", traits: "desiredTraits"}], "desiredTraits"));
console.log(petAdoptionAgency.adoptPet("dog", "ivan"));
</script>

<script>
  // 02. Meetings
  
function createShedule(params) {
// console.log(params);
const meetings = {};

for (const input of params) {
  // console.log(input);
  const data = input.split(' ');
  // console.log(data);
  const day = data[0];
  const name = data[1];

  if (meetings[day]) {
    console.log(`Conflict on ${day}!`);
  } else {
    meetings[day] = name;
    console.log(`Scheduled for ${day}`);
  }
}

// console.log(meetings);
for (const day in meetings) {
  const name = meetings[day]
  console.log(`${day} -> ${name}`);
}

}

// createShedule(['Monday Peter', 'Wednesday Bill', 'Monday Tim', 'Friday Tim']);
// createShedule(['Friday Bob', 'Saturday Ted', 'Monday Bill', 'Monday John', 'Wednesday George']);
    </script>

<script>
  // 10. Contacts Builder✶
  // 11. View Model✶
  // 12. Payment Package
  // 13. String Builder *✶
</script>

    <!-- ================= Get data from local JSON file ================= -->

    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>

    <script>
      const matches4 = `
      40 Desert Blade (Fragment)
40 Minotaur's Head (Fragment)
40 Diviner's Orb - Recipe (Fragment)
50 Panoptic Orb - Recipe (Fragment)
80 Hand of Glory (Fragment)

40 Book of Prophecies - Recipe (Fragment)
50 Book of Fate - Recipe (Fragment)
80 Flaming Heart (Fragment)
160 Pastor's Seal (Fragment)

80 Riversar's Tiara (Fragment)
`;
      const matches3 = `740/120/100      640/320/150`;

const patern = /[0-9]+/g;

const result = matches3.match(patern).reduce((acc, n) => acc + Number(n), 0);
console.log(result);
    </script>
  </body>
</html>