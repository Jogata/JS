<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <title>AJAX | XMLHttpRequest</title> -->
    <title>Clothyfly</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
      fieldset {
        display: none;
      }
    </style>
  </head>
  <body>

      <header>

        <div class="toppera">
          <p>free shipping on all orders. no minimum purchase</p>
        </div>

        <div class="headtop">

          <div class="logo">
            <a href="#">clothyfly</a>
          </div>

          <div class="header-top">
            <a href="/">
              <i class="fa-solid fa-cart-shopping"></i>Shopping Cart
            </a>
            <a href="/">
              <i class="fa-regular fa-heart"></i>My Wish List
            </a>
            <h4>
              <a href="/" style="border-bottom: 1px solid black;">Sign In</a>
              <span>or</span>
              <a href="/" style="border-bottom: 1px solid black;">Create an Account</a>
            </h4>
          </div>

        </div>

        <nav>
          <ul>

            <div class="navli">
              <li>home</li>
              <li>shop</li>
              <li>product</li>
              <li>pages</li>
              <li>trend</li>
              <li>collections</li>
              <li>blog</li>
              <li>new in</li>
            </div>
            
            <form action="#" method="get">
              <input type="text" name="search" placeholder="Search...">
              <button type="submit">search</button>
            </form>

          </ul>
        </nav>

        <div class="headerimgcont">
          <div class="headerimgdetails">
            <h2>men fashion</h2>
            <span></span>
            <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Cum, perferendis?</p>
            <a href="/">shop now</a>
          </div>
        </div>
        
      </header>
      
      <main>

        <div class="shopcat">
          <div class="shopcatimgbx">

            <div class="shopcatbximg">
              <img src="img/img2.jpeg" alt="">
              <a href="/" class="borderbottom">Editor's Pic </a>
            </div>

            <div class="shopcatbximg">
              <img src="img/img3.jpg" alt="">
              <a href="/" class="borderbottom">Shoes </a>
            </div>

            <div class="shopcatbximg">
              <img src="img/img4.jpg" alt="">
              <a href="/" class="borderbottom">Accessories </a>
            </div>

          </div>
        </div>

        <div class="titlecard">
          <h3 class="title">
            <span>new arrivals</span>
          </h3>
          <a href="/">view all</a>
        </div>

        <div class="shopcards">

          <div class="card">

            <div class="card-image">
              <img src="img/card1.jpg" alt="Card 1 Image" class="card-img">
              <div class="card-img-overlay" style="--i:4;">
                <button class="btn add-to-cart">Add to Cart</button>
              </div>
              <span class="card-sale">sale</span>
              <div class="addtowish">
                <span class="heart">
                  <span class="wishlist">Add to Wishlist</span>
                  <i class="fa-regular fa-heart"></i>
                </span>
              </div>
            </div>

            <a href="/" class="card-title">
              (Product 1)Sample - Clothing And Accessory For Sale
            </a>

            <p class="card-price">
              <span class="bmoney">₹999</span>
              <span class="moneytext">From</span>
              <span class="money">₹1599</span>
            </p>

          </div>

        </div>

        <div class="loadmorebtn">
          <button id="load-more-btn">load more</button>
        </div>   

      </main>
  

    <!-- <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1> -->

    <!-- ================= Get data from local JSON file ================= -->

    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>
  </body>
</html>