<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX | XMLHttpRequest</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  </head>
  <body>

    <nav>
      <ul>
        <li>
          <a href="#">gaming</a>
        </li>
        <li>
          <a href="#">music</a>
        </li>
        <li>
          <a href="#" class="cap">css</a>
        </li>
        <li>
          <a href="#">python</a>
        </li>
        <li>
          <a href="#">balls</a>
        </li>
        <li>
          <a href="#">databases</a>
        </li>
      </ul>
    </nav>

    <div class="cards">
      <div>
        <img src="" alt="">
        <span>In stock</span>
        <h1>HAMA Mouse 182620</h1>
        <ul>
          <li>Optical senzor</li>
          <li>Wireless connection </li>
          <li>Resolution 1200 dpi</li>
        </ul>
        <p>1.100 $</p>
        <h2>890 $</h2>
        <button>Add to cart</button>
      </div>
      <div>
        <img src="" alt="">
        <h1>HAMA Optical Mouse MV-300</h1>
        <ul>
          <li>Great wireless optical miss</li>
          <li>Three buttons and wheel</li>
          <li>Mouse resolution up to 1200 dpi</li>
        </ul>
        <p></p>
        <h2></h2>
        <button>Add to cart</button>
    </div>
      <div>
        <img src="" alt="">
        <h1></h1>
        <ul>
          <li></li>
          <li></li>
          <li></li>
        </ul>
        <p></p>
        <h2></h2>
        <button>Add to cart</button>
      </div>
      <div>
        <img src="" alt="">
        <h1></h1>
        <ul>
          <li></li>
          <li></li>
          <li></li>
        </ul>
        <p></p>
        <h2></h2>
        <button>Add to cart</button>
      </div>
    </div>

    <footer>
      <div id="col-1">
        <h1>Shop trade</h1>
        <a href="#">How the store works</a>
        <a href="#">Contact me</a>
        <a href="#">Add a tarde</a>
        <a href="#">Buisness</a>
        <a href="#">Usage Agreement</a>
        <a href="#">Blog</a>
        <a href="#">Allowed use of cookies</a>
        <a href="#">Rulebook about yourself</a>
    </div>
      <div id="col-2">
        <h2>Trade Application</h2>
        <p>With this application you have fashion information at hand! New items, collections and discounts - all in one place and for free.</p>
        <a href="#">
          <img src="./slides/appstore.png" alt="">
        </a>
        <a href="#">
          <img src="./slides/googleplay.png" alt="">
        </a>
        <h1>Store logo</h1>
        <p>Currently you can find 637,448 items from 2,000 brands on our website.</p>
        <a href="#">
          <i>facebook</i>
        </a>
        <a href="#">
          <i>instagram</i>
        </a>
      </div>
      <div id="col-3">
        <h2 class="cap">country</h2>
        <form action="#" method="post">
          <select name="" id="">
            <option value="#">slovenia</option>
            <option value="#">serbia</option>
            <option value="#">croatia</option>
            <option value="#">bulgaria</option>
          </select>
          <p>Fashion inspiration group</p>
          <a href="#">www.blog</a>
        </form>
      </div>
    </footer>
    <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1>
    <!-- ================= Get data from local JSON file ================= -->
    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>
  </body>
</html>