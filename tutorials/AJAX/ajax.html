<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <title>AJAX | XMLHttpRequest</title> -->
    <title>Multiplication App</title>
    <style>
      fieldset {
        display: none;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: Georgia, serif;
      }

      .container {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: Georgia, serif;
        text-align: center;
        background-color: #f2f2f2;
      }

      form {
        margin: 10px;
        padding: 30px;
        outline: 2px solid green;
        outline-offset: -10px;
        border-radius: 10px;
        background-color: #fff;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      }

      .input {
        display: block;
        width: 100%;
        padding: 10px;
        color: green;
        font-size: 25px;
        font-family: inherit;
        text-align: center;
        border: 4px solid green;
      }
      .input::placeholder {
        color: lightgray;
        font-family: inherit;
      }

      .btn {
        display: block;
        width: 100%;
        margin: 20px 0;
        padding: 10px;
        color: #fff;
        font-size: 20px;
        font-family: inherit;
        text-transform: capitalize;
        border: 1px solid transparent;
        border-radius: 5px;
        background-color: green;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        transition: all 400ms;
        cursor: pointer;
      }
      .btn:hover {
        filter: brightness(0.9);
      }

      .score {
        padding-right: 10px;
        padding-bottom: 10px;
        color: green;
        font-size: 20px;
        text-align: right;
        border-bottom: 1px solid lightgray;
      }

      #question {
        max-width: 600px;
        margin: 1rem;
        font-size: 60px;
      }
    </style>
  </head>
  <body>

    <div class="container">
      <form action="" class="form" id="form">
        <h4 class="score" id="score">score: <span>0</span></h4>
        <h1 id="question">What is 1 multiply by 1?</h1>
        <input type="text" name="answer" id="input" class="input" placeholder="Enter Your Answer" autofocus autocomplete="off">
        <button type="submit" class="btn">submit</button>
      </form>

      <script>
        let num1 = Math.ceil(Math.random() * 10);
        let num2 = Math.ceil(Math.random() * 10);

        console.log(num1, num2);

        let result = num1 * num2;

        const questionElement = document.getElementById("question");
        questionElement.innerText = `What is ${num1} multiply by ${num2}?`;
 
        const formElement = document.getElementById("form");
        const inputElement = document.getElementById("input");
        const scoreElement = document.querySelector("#score span");
 
        formElement.addEventListener("submit", (e) => {
 
          e.preventDefault(); 

          const userInput = Number(inputElement.value);
 
          if (userInput === result) {
            console.log(scoreElement.innerText);
            scoreElement.innerText = Number(scoreElement.innerText) + 1;
          } else {
            scoreElement.innerText = Number(scoreElement.innerText) - 1;
          }

        num1 = Math.ceil(Math.random() * 10);
        num2 = Math.ceil(Math.random() * 10);
 
        console.log(num1, num2);
 
        result = num1 * num2;
 
        const questionElement = document.getElementById("question");
        questionElement.innerText = `What is ${num1} multiply by ${num2}?`;
 
        inputElement.value = "";
 
        }) 
      </script> 
 
      <script>
        const arr1 = [1, 2, 3];
        let arr2 = [4, 5, 6];

        const merge = (first, second) => {

          for (let i = 0; i < second.length; i++) {
            first.push(second[i]);
          }

          return first;

        }

        console.log(merge(arr1, arr2));
 
        const mergedSpread = [...arr1, ...arr2];
        console.log(mergedSpread);
        
        arr2 = "Jogata";
        // const mergedConcat = [].concat(arr1, arr2);
        const mergedConcat = arr1.concat(arr2);
        console.log(mergedConcat);
 
        arr2 = [4, 5, 6];
        let mergesPush = arr1.push(...arr2);
        console.log(arr1);
 
        const mergedReduce = arr2.reduce((arr, item) => {
          arr.push(item);
          return arr;
        }, arr1)
        console.log(mergedReduce);
      </script>
      <script>
        const agent = {
          id: "007", 
          name: "James", 
          dept: {
            id: "D001", 
            name: "Spy", 
            address: {
              street: "30 Wellington Square", 
              city: "Chelsea", 
            }
          }
        }
 
        const {id, name} = agent;
        console.log(id);
        console.log(name);

        const {dept: {address}} = agent;
        const {dept: {address: {street}}} = agent;
        console.log(address);
        console.log(street);

        const {id: agentID} = agent;
        console.log(agentID);

        let key = "id";
        console.log(agent[key]);

        const id1 = getPropertyValue("id");
        const name1 = getPropertyValue("name");
 
        function getPropertyValue(key) {
          const {[key]: returnValue} = agent;
          return returnValue;
        }
 
        console.log(id1);
        console.log(name1);
      </script>
    </div>
    
    <!-- <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1> -->

    <!-- ================= Get data from local JSON file ================= -->
    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>
  </body>
</html>