<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX | XMLHttpRequest</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
body {
  padding: 0;
  margin: 0;
}
fieldset {
  display: none;
}
h1 {
  display: none;
}
.test {
  min-height: 100vh;
  overflow: hidden;
}
.test2 {
  margin: 0;
  box-sizing: border-box;
  font-family: sans-serif;
  display: flex;
  justify-content: center;
  /* height: 100vh; */
  align-items: center;
  background-color: black;
}

.main-container {
  max-width: 550px;
  padding: 10px;
}

.main-container img {
  max-width: 100%;
  margin-bottom: 15px;
  border-radius: 10px;
}

.main-container h1 {
  color: white;
  font-weight: 500;
}

.main-container p {
  color: white;
  margin: 15px 0;
}

.btn {
  background-color: white;
  border: none;
  padding: 10px 20px;
  cursor: pointer;
  border-radius: 5px;
}

.btn:hover {
  background-color: orange;
}

.trailer-container {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: black;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 1;
  transition: opacity 0.7s;
}

.active.trailer-container {
  visibility: hidden;
  opacity: 0;
}

.trailer-container video {
  position: relative;
  max-width: 900px;
  outline: none;
}

@media (max-width: 991px) {
  .trailer-container video {
    max-width: 90%;
  }
}

.close-icon {
  position: absolute;
  top: 30px;
  right: 30px;
  color: white;
  cursor: pointer;
}
</style>
  </head>
  <body>
    <div class="test test2">
      <h1>Video Trailer Popup</h1>
      <div class="main-container">
        <img
          src="https://images.pexels.com/photos/3062545/pexels-photo-3062545.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"
          alt="movie-image"
        />
        <h1>Movie Title</h1>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Illum iste
          necessitatibus porro explicabo illo dolorum dolores cupiditate non modi
          quasi nobis, earum ab, autem esse vero sapiente minus vel! Provident?
        </p>
        <button class="btn">Watch now</button>
      </div>
      <div class="trailer-container active">
        <video src="trailer.mp4" controls="true"></video>
        <i class="fa fa-times close-icon"></i>
      </div>
      <script>
        const btnEl = document.querySelector(".btn");
        const closeIconEl = document.querySelector(".close-icon");
        const trailerContainerEl = document.querySelector(".trailer-container");
        const videoEl = document.querySelector("video");
        
        btnEl.addEventListener("click", () => {
          trailerContainerEl.classList.remove("active");
        });
        
        closeIconEl.addEventListener("click", () => {
          trailerContainerEl.classList.add("active");
          videoEl.pause();
          videoEl.currentTime = 0;
        });
      </script>
    </div>

    <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1>

    <h1 id="title" style="display: none;">Loading...</h1>
    <p id="summary" style="display: none;">Loading...</p>

    <script>
      const DEFAULT_STATE = {
        title: "Example Title", 
        summary: "This is the page summary"
      };

      const state = new Proxy({ ...DEFAULT_STATE }, {
        set(obj, prop, value) {
          console.log(`Property ${prop} is wanting to change to ${value}`);

          obj[prop] = value;

          render(obj);

          return true;
        }
      });

      // state.title = "New Title";
      const render = (state) => {
        document.getElementById("title").textContent = state.title;
        document.getElementById("summary").textContent = state.summary;
      }

      render(state);
      // console.log(state);
    </script>

    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>

    <p style="display: none;">
Spend 1,000 Energy
Complete 100 daily quests
22 	
Destroy the Eye of the Herald 5 times in Adventures
Spend 500 Energy
100 titan summons
Complete 150 missions
24 	
Spend 300,000 gold
Heal your heroes for 150,000 in the Tower
Win 2 times in the Campaign mode using a Support hero
25 	
Open 7 chests in the Tower
Win 2 times in the Campaign mode using a Marksman hero
Win 5 times in the Tower mode using a Tank hero
Win 25 Guild Dungeon battles using heroes
Win 8 times in the Arena mode/9 outland chests
26 	
Win 1 time in the Arena mode using a Warrior hero/300 energy
Heal your heroes for 150,000 in the Campaign
Level up the Magic defense glyph
27 	
Spend 500 Tower Coins
Level up a Warrior hero's skill
Win 5 times in Campaign Chapter 8
28 	
Spend 500 Outland Coins
Open 7 chests in the Tower
Level up the Magic attack glyph 
Make 20 purchases from the shop
Get 20 Soul Stones of any Titan
29 	
Get 20 Soul Stones of any hero
Level up a Mage hero's skill
Level up a Marksman hero's Gift of the Elements
30  
Spend 500 Tower Coins
Enter the game chat and create 1 challenge for a battle of heroes or titans
Level up the Armor glyph
    </p>

    <script>
      const matches4 = `
      40 Desert Blade (Fragment)
40 Minotaur's Head (Fragment)
40 Diviner's Orb - Recipe (Fragment)
50 Panoptic Orb - Recipe (Fragment)
80 Hand of Glory (Fragment)

40 Book of Prophecies - Recipe (Fragment)
50 Book of Fate - Recipe (Fragment)
80 Flaming Heart (Fragment)
160 Pastor's Seal (Fragment)

80 Riversar's Tiara (Fragment)
`;
      const matches3 = `740/120/100      640/320/150`;

const patern = /[0-9]+/g;

const result = matches3.match(patern).reduce((acc, n) => acc + Number(n), 0);
console.log(result);
    </script>
  </body>
</html>