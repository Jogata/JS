<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX | XMLHttpRequest</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
    <style>
      fieldset {
        display: none;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        width: 100%;
        min-height: 100vh;
        /* display: flex; */
        /* align-items: center; */
        /* justify-content: center; */
      }

      #content {
    width: 75%;
    margin: 0 auto;
}

div.forecasts {
    display: inline-block;
    width: 30%;
    border: 1px solid aquamarine;
    border-radius: 4px;
    margin: 2% 2% 0.5% 0.5%;
}

div.forecast-info {
    border: 1px solid aquamarine;
    border-radius: 4px;
    margin-bottom: 1%;
}

#request {
    text-align: center;
}

.bl {
    width: 300px;
}

#current {
    text-align: center;
    font-size: 2em;
}

#upcoming {
    text-align: center;
}

.condition {
    text-align: left;
    display: inline-block;
}

.symbol {
    font-size: 4em;
    display: inline-block;
}

.forecast-data {
    display: block;
}

.upcoming {
    display: inline-block;
    margin: 1.5em;
}

.label {
    margin-top: 1em;
    font-size: 1.5em;
    background-color: aquamarine;
    font-weight: 400;
}

input {
    padding: 10px 12px;
    margin: 5px 0;
    display: inline-block;
    border: 1px solid #ccc;
    border-radius: 4px;
}

input[type=button] {
    background-color: aquamarine;
}
    </style>
  </head>
  <body>
    <!-- <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1> -->

<script>
  // 10. Contacts Builder✶
  // 11. View Model✶
  // 12. Payment Package
  // 13. String Builder *✶
</script>

    <!-- ================= Get data from local JSON file ================= -->

    <div id="content">
      <div id="request">
          <input id="location" class='bl' type="text">
          <input id="submit" class="bl" type="button" value="Get Weather">
      </div>
      <div id="forecast" style="display:none">
          <div id="current">
              <div class="label">Current conditions</div>
              <!-- <div class="forecasts">
                  <span class="condition symbol"></span>
                  <span class="condition">
                      <span class="forecast-data">london, usa</span>
                      <span class="forecast-data">8deg/19deg</span>
                      <span class="forecast-data">sunny</span>
                  </span>
              </div> -->
          </div>
          <div id="upcoming">
              <div class="label">Three-day forecast</div>
              <!-- <div class="forecast-info">
                  <span class="upcoming">
                      <span class="symbol"></span>
                      <span class="forecast-data">8deg/19deg</span>
                      <span class="forecast-data">sunny</span>
                  </span>
                  <span class="upcoming">
                      <span class="symbol"></span>
                      <span class="forecast-data">8deg/19deg</span>
                      <span class="forecast-data">sunny</span>
                  </span>
                  <span class="upcoming">
                      <span class="symbol"></span>
                      <span class="forecast-data">8deg/19deg</span>
                      <span class="forecast-data">sunny</span>
                  </span>
              </div> -->
          </div>
      </div>
  </div>

<script>
function attachEvents() {
    // console.log("TODO...");
    const submitbtn = document.getElementById("submit");
    const forecastoutput = document.getElementById("forecast");
    
    submitbtn.addEventListener("click", async () => {
        try {
            const locationInput = document.getElementById("location");
            const locationvalue = locationInput.value;
        } catch (error) {
            forecastoutput.textContent = "Error";
            forecastoutput.style.display = "block";
        }
    });

    // function getLocations(url) {
    //     fetch(url)
    //     .then(response => response.json())
    //     .then(data => console.log(data))
    //     .catch(err => console.log(err));
    // }
}

attachEvents();
</script>

    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>

    <script>
      const matches4 = `
      40 Desert Blade (Fragment)
40 Minotaur's Head (Fragment)
40 Diviner's Orb - Recipe (Fragment)
50 Panoptic Orb - Recipe (Fragment)
80 Hand of Glory (Fragment)

40 Book of Prophecies - Recipe (Fragment)
50 Book of Fate - Recipe (Fragment)
80 Flaming Heart (Fragment)
160 Pastor's Seal (Fragment)

80 Riversar's Tiara (Fragment)
`;
      const matches3 = `740/120/100      640/320/150`;

const patern = /[0-9]+/g;

const result = matches3.match(patern).reduce((acc, n) => acc + Number(n), 0);
console.log(result);
    </script>
  </body>
</html>