<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX | XMLHttpRequest</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
    <style>
      @import url('https://fonts.googleapis.com/css?family=Poppins');
body {
    font-family: 'Poppins', sans-serif;
}
main {
    width: 44%;
    margin: 2rem auto;
    text-align: center;
    background: #f6f6f6;
    padding: 1rem;
    border-radius: 4px;
}
main label, main input {
    display: block;
}
main input {
    text-align: center;
    width: 50%;
    margin: 1rem auto;
}
#daysBtn, #hoursBtn, #minutesBtn, #secondsBtn {
    background: gray;
    width: 18%;
    border: 2px solid gray;
    border-radius: 4px;
    padding: 4px 9px;
    text-transform: uppercase;
    font-weight: bold;
    color: white;
}
#content {
    width: 80%;
    margin: 0 auto;
}
#content div {
    float: left;
    width: 300px;
    height: 300px;
    margin: 2em;
    background: #5555ff;
    text-align: center;
    border-radius: 4px;
}
#content div p {
    color: white;
    margin: 6em 3em 6em 3em;
}
    </style>
  </head>
<body>
  
    <!-- <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1> -->

    <main>
      <h1>Time Converter</h1>
      <div>
          <label for="days">Days: </label>
          <input type="text" id="days">
          <input id="daysBtn" type="button" value="Convert">
      </div>
      <div>
          <label for="hours">Hours: </label>
          <input type="text" id="hours">
          <input id="hoursBtn" type="button" value="Convert">
      </div>
      <div>
          <label for="minutes">Minutes: </label>
          <input type="text" id="minutes">
          <input id="minutesBtn" type="button" value="Convert">
      </div>
      <div>
          <label for="seconds">Seconds: </label>
          <input type="text" id="seconds">
          <input id="secondsBtn" type="button" value="Convert">
      </div>
      <script>
        function attachEventsListeners() {
    const buttons = document.querySelectorAll("div input:last-child");
    // console.log(buttons);

    const convertToSecondsFrom = {
        days: days => days * 24 * 60 * 60, 
        hours: hours => hours * 60 * 60, 
        minutes: minutes => minutes * 60, 
        seconds: seconds => seconds, 
    }

    const convertfromSecondsTo = {
        days: seconds => seconds / 60 / 60 / 24, 
        hours: seconds => seconds / 60 / 60, 
        minutes: seconds => seconds / 60, 
        seconds: seconds => seconds, 
    }

    for (const button of buttons) {

        button.addEventListener("click", () => {
            const inputField = button.previousElementSibling;
            // console.log(unit);
            const convertToSecondsFromUnit = convertToSecondsFrom[inputField.id];
            const seconds = convertToSecondsFromUnit(inputField.value);
            // console.log(seconds);
            const minutes = convertfromSecondsTo.minutes(seconds);
            // console.log(minutes);
            const hours = convertfromSecondsTo.hours(seconds);
            // console.log(hours);
            const days = convertfromSecondsTo.days(seconds);
            // console.log(days);

            const secondsField = document.getElementById("seconds");
            secondsField.value = seconds;

            const minutesField = document.getElementById("minutes");
            minutesField.value = minutes;

            const hoursField = document.getElementById("hours");
            hoursField.value = hours;

            const daysField = document.getElementById("days");
            daysField.value = days;
        })
    }
}
      </script>
  </main>
    
    <div id="content">
      <script>
        function create(words) {
   const content = document.getElementById("content");

   for (const word of words) {
      // console.log(word);
      const parent = document.createElement("div");

      parent.addEventListener("click", () => {
         parent.firstChild.style.display = "block";
      })

      const child = document.createElement("p");
      child.textContent = word;
      child.style.display = "none";
      parent.appendChild(child);
      content.appendChild(parent);
   }
}
      </script>
      <script>
        window.addEventListener("DOMContentLoaded", () => {
          create(['Section 1', 'Section 2', 'Section 3', 'Section 4']);
          attachEventsListeners();
        })
      </script>
    </div>

    <!-- ================= Get data from local JSON file ================= -->

    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>

    <script>
      const matches4 = `
      40 Desert Blade (Fragment)
40 Minotaur's Head (Fragment)
40 Diviner's Orb - Recipe (Fragment)
50 Panoptic Orb - Recipe (Fragment)
80 Hand of Glory (Fragment)

40 Book of Prophecies - Recipe (Fragment)
50 Book of Fate - Recipe (Fragment)
80 Flaming Heart (Fragment)
160 Pastor's Seal (Fragment)

80 Riversar's Tiara (Fragment)
`;
      const matches3 = `740/120/100      640/320/150`;

const patern = /[0-9]+/g;

const result = matches3.match(patern).reduce((acc, n) => acc + Number(n), 0);
console.log(result);
    </script>
  </body>
</html>