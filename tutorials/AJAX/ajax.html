<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX | XMLHttpRequest</title>
    <style>
      fieldset {
        display: none;
      }

      header {
        font-size: 24px;
        text-align: center;
        text-transform: capitalize;
      }

      p {
        font-size: 20px;
      }

      .box {
        display: block;
        float: left;
        width: 20%;
        height: 300px;
        padding: 10px;
        padding-left: 12px;
        overflow: hidden;
      }

      .box img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 5px;
        transition: all 0.5s;
      }
      .box:hover img {
        transform: scale(1.2);
      }

      main {
        display: none;
        margin-left: 120px;
      }

      /* h2 {
        text-transform: capitalize;
      }
      h2 span {
        text-transform: uppercase;
      } */
    </style>
  </head>
  <body>

    <header>
      <h1>photo gallery</h1>
    </header>

    <hr>
 
    <main>
      <div class="box">
        <img src="./slides/348752785_505207435051669_8291971845639749599_n.jpg" alt="">
      </div>
      <div class="box">
        <img src="./slides/356798994_967012961190529_4412407967034851009_n.jpg" alt="">
      </div>
      <div class="box">
        <img src="./slides/356940129_1021872482095940_7163622879331713946_n.jpg" alt="">
      </div>
      <div class="box">
        <img src="./slides/358794262_2029410497404504_8220717208730657446_n.jpg" alt="">
      </div>
      <div class="box">
        <img src="./slides/361293658_1300947700520880_5496842987114781813_n.jpg" alt="">
      </div>
      <div class="box">
        <img src="./slides/363501547_634324178451363_8761577603587065923_n.jpg" alt="">
      </div>
      <div class="box">
        <img src="./slides/366450015_726469829245996_6761655007762136773_n.jpg" alt="">
      </div> 
      <div class="box">
        <img src="./slides/369600102_688341202630518_728054106325483819_n.jpg" alt="">
      </div>

      <script>
        function calc(params) {
          const time = Number(params[0]);
          const scenes = Number(params[1]);
          const duration = Number(params[2]);

          let total = scenes * duration + time * 0.15;

          // console.log(total);

          if (total > time) {
            const diff = total - time;
            console.log(`Time is up! To complete the movie you need ${diff.toFixed()} minutes.`);
          } else {
            const diff = time - total;
            console.log(`You managed to finish the movie on time! You have ${diff.toFixed()} minutes left!`);
          }
        }

        calc(["120", "10", "11"]);
        calc(["60", "15", "3"]);

        // 01. Movie Profit

        function calcProfit(params) {
          const movie = params[0];
          const days = Number(params[1]);
          const tickets = Number(params[2]);
          const price = Number(params[3]);
          const percent = Number(params[4]);

          let total = days * tickets * price;
          let profit = total * (100 - percent) / 100;

          console.log(`The profit from the movie ${movie} is ${profit.toFixed(2)} lv.`);

        }

        calcProfit(["The Programmer", "20", "500", "7.50", "7"]);
        calcProfit(["Python Basics", "40", "34785", "10.45", "14"]);
        calcProfit(["The Jungle", "22", "20500", "9.37", "30"]);
      </script>
    </main>

    <font align="center" size="5">
      <!-- <h2>photo gallery - <span>html</span> only</h2> -->
      <h1>photo</h1>
    </font>

    <table align="center">
      <tr>
        <td>
          <img src="./slides/348752785_505207435051669_8291971845639749599_n.jpg" alt="" width="250" height="350">
        </td>
        <td>
          <img src="./slides/356798994_967012961190529_4412407967034851009_n.jpg" alt="" width="250" height="350">
        </td>
        <td>
          <img src="./slides/356940129_1021872482095940_7163622879331713946_n.jpg" alt="" width="250" height="350">
        </td> 
      </tr>
      <tr>
        <td>
          <img src="./slides/358794262_2029410497404504_8220717208730657446_n.jpg" alt="" width="250" height="350">
        </td>
        <td>
          <img src="./slides/361293658_1300947700520880_5496842987114781813_n.jpg" alt="" width="250" height="350">
        </td>
        <td>
          <img src="./slides/363501547_634324178451363_8761577603587065923_n.jpg" alt="" width="250" height="350">
        </td>
      </tr>
      <tr>
        <td>
          <img src="./slides/366450015_726469829245996_6761655007762136773_n.jpg" alt="" width="250" height="350">
        </td>
        <td>
          <img src="./slides/369600102_688341202630518_728054106325483819_n.jpg" alt="" width="250" height="350">
        </td>
        <td>
          <img src="./slides/369813609_1028538561470536_1690811916422768795_n.jpg" alt="" width="250" height="350">
        </td>
      </tr>
    </table>
 
    <!-- <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1> -->

    <!-- ================= Get data from local JSON file ================= -->
    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>
  </body>
</html>