<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX | XMLHttpRequest</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  </head>
  <body>

    <header>

      <nav>

        <div class="navtop">

          <div class="navone flex container">

            <ul class="flex">
              <li><a href="/">home</a></li>
              <li><a href="/">about us</a></li>
              <li><a href="/">privacy policy</a></li>
              <li><a href="/">contact us</a></li>
            </ul>

            <div class="sociallink flex">
              <a href="/" title="facebook">
                <i class="fa-brands fa-facebook"></i>
              </a>
              <a href="/" title="twitter">
                <i class="fa-brands fa-x-twitter"></i>
              </a>
              <a href="/" title="youtube">
                <i class="fa-brands fa-youtube"></i>
              </a>
              <a href="/" title="pinterest">
                <i class="fa-brands fa-pinterest"></i>
              </a>
            </div>

          </div>

        </div>

        <div class="navmain">

          <div class="navtwo flex container">

            <div class="logo navlist flex">

              <a href="/" class="flex">
                <i class="fa-solid fa-laptop-code"></i>
                <h1>codespot</h1>
              </a>

              <ul class="flex">
                <button class="navoff">X</button>
                <li><a href="/">home</a></li>
                <li><a href="/">features <i class="fa-solid fa-angle-down"></i></a></li>
                <li><a href="/">mega menu <i class="fa-solid fa-angle-down"></i></a></li>
                <li><a href="/">mega tegs <i class="fa-solid fa-angle-down"></i></a></li>
                <li><a href="/">posts</a></li>
                <li><a href="/">shortcodes</a></li>
              </ul>

            </div>

            <div class="navsearch flex">

              <div class="darkmode">
                <div class="checkboxdarkmode">
                  <input type="checkbox" id="toggledark">
                </div>
              </div>

              <div class="searchbar">
                <i class="fa-solid fa-xmark" id="removesearch" style="display: none;"></i>
                <i class="fa-solid fa-magnifying-glass" id="searchicon"></i>
              </div>

              <input type="search" placeholder="Search here..." id="searchinput" style="display: none;">
              <button class="navon">X</button>

            </div>
          </div>
        </div>
      </nav>
    </header>
    <main class="container">
      <section class="trendingsec flex">
        <div class="flex">
          <div class="trending-title">
            <h3>Trending<i class="fa-solid fa-angle-right"></i></h3>
          </div>
          <div class="text-change">18 Practices for Building Responsive Web Applications</div>
        </div>
        <div class="leftrightchange">
          <button><i class="fa-solid fa-angle-left" id="notileft"></i></button>
          <button><i class="fa-solid fa-angle-right" id="notiright"></i></button>
        </div>
      </section>
      <section class="headerpostsec">
        <div class="hposts">
          <a href="/" class="bigpost toppost" id="firstpost">
            <img src=".images/img/leptop post.jpg" alt="" id="bigpost-image">
            <div class="postinfo">
              <span class="label" id="bigpost-label">laptop</span>
              <h2 id="bigpost-title">11 of best laptops evaluated based on budget</h2>
              <p>by CODER October 02, 2023</p>
            </div>
          </a>
          <div class="gridpost">
            <a href="/" class="gpost toppost">
              <img src=".images/img/watch post.jpg" alt="">
              <div class="postinfo">
                <span class="label">Apple</span>
                <h2>apple watch series 5 is the best one yet by consumer</h2>
                <p>October 02, 2023</p>
              </div>
            </a>
            <a href="/" class="gpost toppost">
              <img src=".images/img/leptop post.jpg" alt="">
              <div class="postinfo">
                <span class="label">laptop</span>
                <h2>11 of Best Laptops Evaluated Based on Budget</h2>
                <p>October 18, 2023</p>
              </div>
            </a>
            <a href="/" class="gpost toppost">
              <img src=".images/img/post4.jpg" alt="">
              <div class="postinfo">
                <span class="label">Apple</span>
                <h2>18 Practices for building responsive web applications</h2>
                <p>October 02, 2023</p>
              </div>
            </a>
          </div>
        </div>
      </section>
    </main>
    <!-- <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1> -->

    <!-- ================= Get data from local JSON file ================= -->

    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>
  </body>
</html>