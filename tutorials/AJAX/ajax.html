<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX | XMLHttpRequest</title>
    <style>
      h1 {
        text-align: center;
      }
      h1 span {
        display: inline-block;
        margin-right: 10px;
        padding-right: 20px;
        border-right: 2px solid;
      }
      button {
        padding: 5px 10px;
        border-radius: 5px;
      }
      fieldset {
        margin: 2rem auto;
      }
    </style>
  </head>
  <body>
    <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1>
    <!-- ================= Get data from local JSON file ================= -->
    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>

    <script>
      function unicePinCodes (input){
 
 let firstNumEnd = Number(input[0]);
 let secondNumEnd = Number(input[1]);
 let thirdNumEnd = Number(input[2]);



    for(let a = 1; a <= firstNumEnd; a++){

      for(let b = 1; b <= secondNumEnd; b++) {

        for( let m = 2; m < 7; m++ ) {

          for(let c = 1; c <= thirdNumEnd; c++) {

             if( a % 2 === 0 && c % 2 === 0 ) {
                 console.log(a.toString() + " " + b.toString() + " " + c.toString()) 
              }
            }
          }
        }
      }
    }

    function fund(input) {
    index = 0
    let expectedDonation = Number(input[index])
    index++
 
    let priceSubjects = input[index];
    index++
 
    let transactionDeclined = false;
    let payByCard = 0;
    let payCash = 0;
 
    let numTransaction = 0;
 
    let fundCollected = 0;
    let sumOfCards = 0;
    let sumOfCash = 0;

    while(priceSubjects !== "End") {
let priceSubjectss = Number(priceSubjects)
numTransaction++

        if(numTransaction % 2 === 0 && priceSubjectss < 10) {
            transactionDeclined = true;
            console.log("Error in transaction!");
         } else if (numTransaction % 2 === 0 && priceSubjectss > 10) {
            payByCard++
            fundCollected += priceSubjectss
            sumOfCards +=priceSubjectss
 
            console.log("Product sold!");
            }

            if(numTransaction % 2 !== 0 && priceSubjectss > 100) {
                transactionDeclined = true;
                console.log("Error in transaction!");
            } else if(numTransaction % 2 !== 0 && priceSubjectss < 100) {
                payCash++
                fundCollected += priceSubjectss
                sumOfCash += priceSubjectss
                console.log("Product sold!");
            }
 
            if(fundCollected > expectedDonation) {
                break;
            }

            priceSubjects = input[index];
            index++
 
            }
 
if(fundCollected < expectedDonation) {
    console.log("Failed to collect required money for charity.");
} else {
    console.log(`Average CS: ${(sumOfCash / payCash).toFixed(2)}`);
    console.log(`Average CC: ${(sumOfCards / payByCard).toFixed(2)}` );
}
}
// fund(['600', '86', '150', '98', '227', 'End']);

function  multiplyTable(input){
let n = input[0];
let result = "";
 
for (let i = 1; i <= n.charAt(2); i++){
   
    for(let y = 1; y <= n.charAt(1); y++){
        
        for(let k = 1; k <= n.charAt(0); k++){
            result = i * y * k;
            console.log(`${i} * ${y} * ${k} = ${result};`)
        }
    }
}
}

function findValidCombination(input) {
  const n = parseInt(input);
  for (let a = 1; a <= 9; a++) {
    for (let b = a; b <= 9; b++) {
      for (let c = 0; c <= 9; c++) {
        for (let d = 9; d >= c; d--) {
          const sum = a + b + c + d;
          const product = a * b * c * d;
 
          if (sum === product && n % 10 === 5) {
            const abcd = a * 1000 + b * 100 + c * 10 + d;
            console.log(abcd.toString());
            return;
          }
 
          if (product % sum === 0 && n % 3 === 0) {
            const dcba = d * 1000 + c * 100 + b * 10 + a;
            console.log(dcba.toString());
            return;
          }
        }
      }
    }
  }
 
  console.log("Nothing found");
}
 
findValidCombination([123,]);

function substitute(input) {
 
 let k = Number(input[0]);
 let l = Number(input[1]);
 let m = Number(input[2]);
 let n = Number(input[3]);
 let subCounter = 0;

 for (let i = k; i <= 8; i++) {
     for (let y = 9; y >= l; y--) {
         for (let x = m; x <= 8; x++) {
             for (let z = 9; z >= n; z--) {
                 if (i % 2 === 0 && x % 2 === 0) {
                     if (y % 2 !== 0 && z % 2 !== 0) {
                         if (i === x && y === z) {
                             console.log("Cannot change the same player.");
                         } else {
                             console.log(`${i}${y} - ${x}${z}`);
                             subCounter++;
                             if (subCounter === 6) {
                                 return;
                             }
                         }
                     }
                 }
             }
         }
     }
 }
}

// substitute(["6", "7", "5", "6"])
    </script>
  </body>
</html>