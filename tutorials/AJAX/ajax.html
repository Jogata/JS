<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX | XMLHttpRequest</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
<style>
@import url('https://fonts.googleapis.com/css?family=Lato');
  
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    font-family: "Lato", sans-serif;
    font-size: 24px;
    color: #234465;
}

body{
    background-image: url('./softuni-wallpaper-5-1920x1080.jpg');
}

h4 {
    width: 70%;
    margin: 1% auto;
    padding: 11px;
    text-align: center;
    color: white;
}

#exercise {
    width: 78%;
    margin: 3% auto;
    padding: 1rem;
    border: 1px solid lightgrey;
    text-align: center;
    background: radial-gradient(rgb(39, 38, 38), transparent);
    box-shadow: 0px 5px 11px 2px white;
    border-top-left-radius: 30px;
    border-top-right-radius: 30px;
}

input[type="button"], button {
    padding: 0.3rem 0.5rem;
    font-size: 1.1em;
    min-width: 10%;
    margin: 1rem 0;
    border: none;
    color: white;
    background: #234465;
    border-radius: 5px;
    outline: none;
    text-transform: uppercase;
    font-weight: bold;
    letter-spacing: 0px;
    border-bottom: 1px solid white;
    border-left: 1px solid white;
    cursor: pointer;
}
button:hover {
    box-shadow: 1px 1px 14px 5px green;
}

textarea {
    width: 90%;
    padding: 1%;
    word-wrap: break-word;
    resize: none;
    text-align: center;
    font-size: 18px;
    border: none;
    outline: none;
    background-color: rgba(255,255,255,0.6);
    box-shadow: 0px 5px 11px 2px lightslategrey;
}
textarea:focus {
    box-shadow: 1px 1px 14px 5px green;
}

#output p {
    color : white;
    padding: 1%;
    word-wrap: break-word;
    border-bottom: 1px solid lightgrey;
}
</style>
  </head>
  <body>
    <!-- <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1> -->

    <h4>Create a functionality which formats the given text into paragraphs</h4>
    <div id="exercise">
        <textarea id="input" cols="30" rows="12"></textarea>
        <button type="button" id="formatItBtn" onclick="solve()">Format</button>
        <div id="output"></div>
    </div>
  <script>
        const text = "JavaScript, often abbreviated as JS, is a high-level, interpreted programming language. It is a language which is also characterized as dynamic, weakly typed, prototype-based and multi-paradigm. Last";
        // const text = "JavaScript, often abbreviated as JS, is a high-level, interpreted programming language. It is a language which is also characterized as dynamic, weakly typed, prototype-based and multi-paradigm. Alongside HTML and CSS, JavaScript is one of the three core technologies of the World Wide Web. JavaScript enables interactive web pages and thus is an essential part of web applications. The vast majority of websites use it, and all major web browsers have a dedicated JavaScript engine to execute it. As a multi-paradigm language, JavaScript supports event-driven, functional, and imperative (including object-oriented and prototype-based) programming styles. It has an API for working with text, arrays, dates, regular expressions, and basic manipulation of the DOM, but the language itself does not include any I/O, such as networking, storage, or graphics facilities, relying for these upon the host environment in which it is embedded. Pre. Last."
        document.querySelector("#input").value = text;

        function solve() {
  const textarea = document.querySelector("#input");
  const text = textarea.value;
  // console.log(text);
  const output = document.getElementById("output");
  
  const phrases = text.split(".").filter(x => x.length > 0);
  // const phrases = new Array();
  // phrases.length = 11;
  console.log(phrases);
  const para = Math.floor(phrases.length / 3);
  console.log(para);
  const remaining = phrases.length - para * 3;
  console.log(remaining);

  for (let index = 0; index < para; index++) {
    let text = "";
    for (let index2 = index * 3; index2 < index * 3 + 3; index2++) {
      text += phrases[index2] + ".";
    }
    // console.log(text);
    // const p = document.createElement("p");
    const p = ` ${text} </p>`;
    // p.textContent = text;
  
    // output.appendChild(p);
    output.innerHTML += p;
  }

  // let lastParaText = "";
  // for (let index = para * 3; index < para * 3 + remaining; index++) {
    // lastParaText += phrases[index] + ".";
  // }
  // console.log(lastParaText);
  // const p = document.createElement("p");
  // const p = `<p> ${lastParaText} </p>`;
  // p.textContent = lastParaText;
  
  // output.appendChild(p);
  // output.innerHTML += p;
}
  </script>

<script>
  // 10. Contacts Builder✶
  // 11. View Model✶
  // 12. Payment Package
  // 13. String Builder *✶
</script>

    <!-- ================= Get data from local JSON file ================= -->

    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>

    <script>
      const matches4 = `
      40 Desert Blade (Fragment)
40 Minotaur's Head (Fragment)
40 Diviner's Orb - Recipe (Fragment)
50 Panoptic Orb - Recipe (Fragment)
80 Hand of Glory (Fragment)

40 Book of Prophecies - Recipe (Fragment)
50 Book of Fate - Recipe (Fragment)
80 Flaming Heart (Fragment)
160 Pastor's Seal (Fragment)

80 Riversar's Tiara (Fragment)
`;
      const matches3 = `740/120/100      640/320/150`;

const patern = /[0-9]+/g;

const result = matches3.match(patern).reduce((acc, n) => acc + Number(n), 0);
console.log(result);
    </script>
  </body>
</html>