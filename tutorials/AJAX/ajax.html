<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX | XMLHttpRequest</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
    <style>
      @import url('https://fonts.googleapis.com/css?family=Poppins');
      @import url('https://fonts.googleapis.com/css?family=Lato');
      @import url('https://fonts.googleapis.com/css?family=PT+Sans');
      @import url('https://fonts.googleapis.com/css?family=Raleway');

*{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
html{
  color: #234465;
  font-size: 24px;
}
body{
  margin: 0;
  min-height: 100vh;
  /* display: flex; */
  /* flex-wrap: wrap; */
  /* flex-direction: column; */
  /* font-family: 'Poppins', sans-serif; */
  font-family: "PT sans", sans-serif;
  width: 40%;
  margin: 0 auto;
  padding-top: 20px;
  font-family: 'Raleway', sans-serif;
}

#exercise{   
  float: left;
  width: 70%;
  padding: 1rem 0 1rem 1rem;
}
main:after{
    display: block;
    content:'';
    clear: both;
}

input[type="button"], button{
    padding: 0.3rem 0.5rem;
    font-size: 0.7em;
    margin: 1rem 0 1rem 0;
    border: none;
    color: white;
    background: #234465;
    border-radius: 5px;
    outline: none;
}

.profile{
    border:2px solid black;
    display: inline-block;
    margin-left: 12%;
    width: 18%;
    vertical-align: top;
}

.userIcon{
    width: 99%;
    height: auto;
    margin: 0 auto;
}

input[name="user3Username"], 
input[name="user2Username"], 
input[name="user1Username"]{
    display: inline-block;
    width: 100%;
}

#user1HiddenFields input, 
#user2HiddenFields input, 
#user3HiddenFields input{
	width: 100%;
}

#user1HiddenFields, 
#user2HiddenFields, 
#user3HiddenFields{
    display: none;
}

.main1 {
    width: 44%;
    margin: 5rem auto 2rem;
    text-align: center;
    background: #f6f6f6;
    padding: 1rem;
    border-radius: 4px;
}
.main1 label, 
.main1 input {
    display: block;
}
.main1 input {
  width: 50%;
  margin: 1rem auto;
  text-align: center;
}

#daysBtn, #hoursBtn, #minutesBtn, #secondsBtn {
    background: gray;
    width: 18%;
    border: 2px solid gray;
    border-radius: 4px;
    padding: 4px 9px;
    text-transform: uppercase;
    font-weight: bold;
    color: white;
}

#content {
    width: 80%;
    margin: 0 auto;
}
#content div {
    float: left;
    width: 300px;
    height: 300px;
    margin: 2em;
    background: #5555ff;
    text-align: center;
    border-radius: 4px;
}
#content div p {
    color: white;
    margin: 6em 3em 6em 3em;
}

h1 {
    background-color: cadetblue;
    margin: 0;
    padding: 10px 20px;
}

article {
  margin-bottom: 3rem;
  padding: 10px 20px;
  background-color: #DDDDDD;
}

#menu {
    padding: 3px 7px;
    border-radius: 15px;
}

input, select {
    outline: none;
    padding: 5px;
}
select {
    margin-bottom: 12px;
}

input[type="text"] {
    border: 1px solid darkgray;
    border-radius: 15px;
}

input[type="button"] {
    background: white;
    margin-left: 20px;
    padding: 5px 15px;
    border: 1px solid darkgray;
    border-radius: 15px;
    font-weight: bold;
    cursor: pointer;
    color: #8198A2;
    text-transform: uppercase;
}
    </style>
  </head>
<body>
  
    <!-- <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1> -->
    <h1>Dropdown Menu</h1>
    <article>
        <div>
            <select id="menu"></select>
        </div>
        <label for="newItemText">
            Text:
        </label>
        <input type="text" id="newItemText" />
        <label for="newItemValue">
            Value:
        </label>
        <input type="text" id="newItemValue" />
        <input type="button" value="Add" onclick="addItem()">
    </article>
    <script>
      function addItem() {
    const nameField = document.getElementById("newItemText");
    const valueField = document.getElementById("newItemValue");

    const menu = document.getElementById("menu");

    const button = document.querySelector("input:last-child");
    // console.log(button);
    // console.log(menu);
    // console.log(nameField);
    // console.log(valueField);

    // button.addEventListener("click", () => {
        const name = nameField.value;
        const value = valueField.value;
        // console.log(name, value);
        
        const option = document.createElement("option");
        // console.log(option);
        option.text = name;
        option.value = value;
        menu.appendChild(option);
        
        nameField.value = "";
        valueField.value = "";
    // })
}
    </script>

    <div id="container">
      <main id="main">
  
        <div class="profile">
          <img src="./iconProfile2.png" class="userIcon" />
          <label>Lock</label>
          <input type="radio" name="user1Locked" value="lock" checked>
          <label>Unlock</label>
          <input type="radio" name="user1Locked" value="unlock"><br>
          <hr>
          <label>Username</label>
          <input type="text" name="user1Username" value="User 1 Userov" disabled readonly />
          <div id="user1HiddenFields">
            <hr>
            <label>Email:</label>
            <input type="email" name="user1Email" value="user1-userov@users.bg" disabled readonly />
            <label>Age:</label>
            <input type="email" name="user1Age" value="18" disabled readonly />
          </div>
          <button>Show more</button>
        </div>
  
        <div class="profile">
          <img src="./iconProfile2.png" class="userIcon" />
          <label>Lock</label>
          <input type="radio" name="user2Locked" value="lock" checked>
          <label>Unlock</label>
          <input type="radio" name="user2Locked" value="unlock"><br>
          <hr>
          <label>Username</label>
          <input type="text" name="user2Username" value="User 2 Userov" disabled readonly />
          <div id="user2HiddenFields">
            <hr>
            <label>Email:</label>
            <input type="email" name="user2Email" value="user2-userov@users.bg" disabled readonly />
            <label>Age:</label>
            <input type="email" name="user2Age" value="25" disabled readonly />
          </div>
          <button>Show more</button>
        </div>
  
        <div class="profile">
          <img src="./iconProfile2.png" class="userIcon" />
          <label>Lock</label>
          <input type="radio" name="user3Locked" value="lock" checked>
          <label>Unlock</label>
          <input type="radio" name="user3Locked" value="unlock"><br>
          <hr>
          <label>Username</label>
          <input type="text" name="user3Username" value="User 3 Userov" disabled readonly />
          <div id="user3HiddenFields">
            <hr>
            <label>Email:</label>
            <input type="email" name="user3Email" value="user3-userov@users.bg" disabled readonly />
            <label>Age:</label>
            <input type="email" name="user3Age" value="23" disabled readonly />
          </div>
          <button>Show more</button>
        </div>
      </main>
    </div>
    <script>
      function lockedProfile() {
    const buttons = document.getElementsByTagName("button");

    const displayStyles = {
        "Hide it": {
            newState: "none", 
            text: "Show more"
        }, 
        "Show more": {
            newState: "block", 
            text: "Hide it"
        }
    }

    for (const button of buttons) {
        button.addEventListener("click", () => {
            // console.log(button.parentElement);
            const parent = button.parentElement;
            const checkedRadioButton = parent.querySelector('input:checked');
            // console.log(checkedRadioButton.value);

            if (checkedRadioButton.value == "unlock") {
                // console.log(button);
                const hiddenElement = button.previousElementSibling;
                // const currentState = window.getComputedStyle(hiddenElement).display;
                const currentState = button.textContent;
                // console.log(currentState);
                hiddenElement.style.display = displayStyles[currentState].newState;
                button.textContent = displayStyles[currentState].text;
            }
        })
    }
}
    </script>
  

    <main class="main1">
      <h1>Time Converter</h1>
      <div>
          <label for="days">Days: </label>
          <input type="text" id="days">
          <input id="daysBtn" type="button" value="Convert">
      </div>
      <div>
          <label for="hours">Hours: </label>
          <input type="text" id="hours">
          <input id="hoursBtn" type="button" value="Convert">
      </div>
      <div>
          <label for="minutes">Minutes: </label>
          <input type="text" id="minutes">
          <input id="minutesBtn" type="button" value="Convert">
      </div>
      <div>
          <label for="seconds">Seconds: </label>
          <input type="text" id="seconds">
          <input id="secondsBtn" type="button" value="Convert">
      </div>
      <script>
        function attachEventsListeners() {
    const buttons = document.querySelectorAll("div input:last-child");
    // console.log(buttons);

    const convertToSecondsFrom = {
        days: days => days * 24 * 60 * 60, 
        hours: hours => hours * 60 * 60, 
        minutes: minutes => minutes * 60, 
        seconds: seconds => seconds, 
    }

    const convertfromSecondsTo = {
        days: seconds => seconds / 60 / 60 / 24, 
        hours: seconds => seconds / 60 / 60, 
        minutes: seconds => seconds / 60, 
        seconds: seconds => seconds, 
    }

    for (const button of buttons) {

        button.addEventListener("click", () => {
            const inputField = button.previousElementSibling;
            // console.log(unit);
            const convertToSecondsFromUnit = convertToSecondsFrom[inputField.id];
            const seconds = convertToSecondsFromUnit(inputField.value);
            // console.log(seconds);
            const minutes = convertfromSecondsTo.minutes(seconds);
            // console.log(minutes);
            const hours = convertfromSecondsTo.hours(seconds);
            // console.log(hours);
            const days = convertfromSecondsTo.days(seconds);
            // console.log(days);

            const secondsField = document.getElementById("seconds");
            secondsField.value = seconds;

            const minutesField = document.getElementById("minutes");
            minutesField.value = minutes;

            const hoursField = document.getElementById("hours");
            hoursField.value = hours;

            const daysField = document.getElementById("days");
            daysField.value = days;
        })
    }
}
      </script>
  </main>
    
    <div id="content">
      <script>
        function create(words) {
   const content = document.getElementById("content");

   for (const word of words) {
      // console.log(word);
      const parent = document.createElement("div");

      parent.addEventListener("click", () => {
         parent.firstChild.style.display = "block";
      })

      const child = document.createElement("p");
      child.textContent = word;
      child.style.display = "none";
      parent.appendChild(child);
      content.appendChild(parent);
   }
}
      </script>
      <script>
        window.addEventListener("DOMContentLoaded", () => {
          create(['Section 1', 'Section 2', 'Section 3', 'Section 4']);
          attachEventsListeners();
          lockedProfile();
        })
      </script>
    </div>

    <!-- ================= Get data from local JSON file ================= -->

    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>

    <script>
      const matches4 = `
      40 Desert Blade (Fragment)
40 Minotaur's Head (Fragment)
40 Diviner's Orb - Recipe (Fragment)
50 Panoptic Orb - Recipe (Fragment)
80 Hand of Glory (Fragment)

40 Book of Prophecies - Recipe (Fragment)
50 Book of Fate - Recipe (Fragment)
80 Flaming Heart (Fragment)
160 Pastor's Seal (Fragment)

80 Riversar's Tiara (Fragment)
`;
      const matches3 = `740/120/100      640/320/150`;

const patern = /[0-9]+/g;

const result = matches3.match(patern).reduce((acc, n) => acc + Number(n), 0);
console.log(result);
    </script>
  </body>
</html>