<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX | XMLHttpRequest</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  </head>
  <body>
    <script>
      // 10. Letters Change Numbers✶

function playGame(data) {
// console.log(data);
const entries = data.split(" ").filter(x => x);
// console.log(entries);
let sum = 0;

for (const entry of entries) {
  // console.log(entry);
  const firstLetter = entry[0];
  let typeOfFirstLetter = findType(firstLetter);
  let firstLetterPosition = findPosition(firstLetter, typeOfFirstLetter);

  const lastLetter = entry[entry.length - 1];
  let typeOfLastLetter = findType(lastLetter);
  let lastLetterPosition = findPosition(lastLetter, typeOfLastLetter);

  const number = Number.parseInt(entry.substring(1));

  let result = number;
  // console.log(number);
  // console.log(firstLetter);
  // console.log(lastLetter);
  // console.log(typeOfLastLetter);
  // console.log(typeOfFirstLetter);
  // console.log(firstLetterPosition);
  // console.log(lastLetterPosition);

  if (typeOfFirstLetter == "upper") {
    result = result / firstLetterPosition;
  } else {
    result = result * firstLetterPosition;
  }

  if (typeOfLastLetter == "upper") {
    result = result - lastLetterPosition;
  } else {
    result = result + lastLetterPosition;
  }

  // console.log(result);
  sum += result;

}

function findType(letter) {
  let type = "";
  const ascii = letter.charCodeAt(0);
  if (ascii > 64 && ascii < 91) {
    type = "upper";
  } else {
    type = "lower";
  }

  return type;

}

function findPosition(letter, letterType) {
  let position = 0;
  const ascii = letter.charCodeAt(0);
  if (letterType == "upper") {
    position = ascii - 64;
  } else {
    position = ascii - 96;
  }

  return position;

}

console.log(sum.toFixed(2));

}

// playGame('A12b s17G');
// playGame("P34562Z q2576f   H456z");
// playGame("a1A");

console.log("a".charCodeAt(0));
console.log("z".charCodeAt(0));

// 09. Password Generator✶

function generatePassword(params) {
// console.log(params);
const p1 = params[0];
const p2 = params[1];
const tamplete = params[2];

const pass = p1 + p2;
// console.log(pass);
// console.log(tamplete);
const passArr = pass.split("");

const vowels = {
  a: true, 
  o: true, 
  e: true, 
  i: true, 
  u: true, 
  // y: true, 
}

let current = 0;

for (let index = 0; index < passArr.length; index++) {
  const letter = passArr[index];

  if (vowels[letter]) {
    // console.log(letter);
    // pass = pass.replace(letter, tamplete[current]);
    passArr[index] = tamplete[current].toUpperCase();
    current++;

    if (current == tamplete.length) {
      current = 0;
    }
    
  }

}

const reversedPassword = passArr.reverse();
console.log(`Your generated password is ${reversedPassword.join("")}`);

}

// generatePassword(['ilovepizza', 'ihatevegetables', 'orange']);
// generatePassword(['easymoneyeazylife', 'atleasttencharacters', 'absolute']);
// generatePassword(['areyousureaboutthisone', 'notquitebutitrustyou', 'disturbed']);
    </script>

    <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1>

    <!-- ================= Get data from local JSON file ================= -->

    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>

  </body>
</html>