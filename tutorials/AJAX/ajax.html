<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX | XMLHttpRequest</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  </head>
  <body>
    <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1>

    <!-- ================= Get data from local JSON file ================= -->

    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>

    <script>
      // 1. Sum First and Last Array Elements

      function sumFirstandLastArrayElements(params) {
        const first = params[0];
        const last = params[params.length - 1];

        const sum = first + last;

        console.log(sum);

      }

      // sumFirstandLastArrayElements([20, 30, 40]);
      // sumFirstandLastArrayElements([10, 17, 22, 33]);
      // sumFirstandLastArrayElements([11, 58, 69]);

      // 2. Day of Week

      function printDayofWeek(num) {
        const days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];

        let day = days[num - 1];

        if (day == undefined) {
          day = 'Invalid day!';
        }

        console.log(day);

      }

      // printDayofWeek(3);
      // printDayofWeek(6);
      // printDayofWeek(11);

      // 3. Reverse an Array of Numbers

      function ReverseArrayofNumbers(num, params) {
        const reversed = [];

        for (let index = 0; index < num; index++) {
          reversed.unshift(params[index]);
        }

        console.log(reversed.join(" "));

      }

      // ReverseArrayofNumbers(3, [10, 20, 30, 40, 5]);
      // ReverseArrayofNumbers(4, [-1, 20, 99, 5]);
      // ReverseArrayofNumbers(2, [66, 43, 75, 89, 47]);

      // 4. Reverse In Place

      function ReverseArray(params) {
        params.reverse();

        console.log(params.join(" "));

      }

      // ReverseArray(['a', 'b', 'c', 'd', 'e']);
      // ReverseArray(['abc', 'def', 'hig', 'klm', 'nop']);
      // ReverseArray(['33', '123', '0', 'dd']);

      // 05. Sum Even Numbers

      function sumEvenNumbers(params) {
        let sum = 0;

        for (let index = 0; index < params.length; index++) {
          const num = Number(params[index]);

          if (num % 2 == 0) {
            sum += num;
          }
        }

        console.log(sum);

      }

      // sumEvenNumbers(['1','2','3','4','5','6']);
      // sumEvenNumbers(['3','5','7','9']);
      // sumEvenNumbers(['2','4','6','8','10']);

      // 06. Even and Odd Subtraction

      function evenAndOddSubtraction(params) {
        let odd = 0;
        let even = 0;

        for (let index = 0; index < params.length; index++) {
          const num = params[index];

          if (num % 2 == 0) {
            even += num;
          } else {
            odd += num;
          }
        }

        let diff = even - odd;

        console.log(diff);

      }

      // evenAndOddSubtraction([1,2,3,4,5,6]);
      // evenAndOddSubtraction([3,5,7,9]);
      // evenAndOddSubtraction([2,4,6,8,10]);

      // 07. Equal Arrays

      function sravniArrays(arr1, arr2) {
        let sum = 0;
        let areEqual = true;

        // if (arr1.length != arr2.length) {
        //   areEqual = false;
        // }

        for (let index = 0; index < arr1.length; index++) {
          if (arr1[index] != arr2[index]) {
            areEqual = false;
            console.log(`Arrays are not identical. Found difference at ${index} index`);
            index = arr1.length;
          } else {
            sum +=Number(arr1[index]);
            // console.log(sum);
          }
        }

        if (areEqual) {
          console.log(`Arrays are identical. Sum: ${sum}`);
        }

      }

      // sravniArrays(['10','20','30'], ['10','20','30']);
      // sravniArrays(['1','2','3','4','5'], ['1','2','4','4','5']);
      // sravniArrays(['1'], ['10']);
    </script>

    <script>
            // 8. Condense Array to Number

            function condenseArraytoNumber(params) {
        // params.push(0);
        // console.log(params);
        
        while (params.length > 2) {
          let newArray = [];

          for (let index = 0; index < params.length - 1; index++) {
            const current = params[index];
            // console.log(current);
            const next = params[index + 1];
            // console.log(next);
            let sum = current + next;
            newArray.push(sum);
          }

          params = newArray;
          // params.pop();
          // console.log(params);

        }

        let sum = 0;

        for (let index = 0; index < params.length; index++) {
          sum = sum + params[index];
        }

        console.log(sum);

      }

      // condenseArraytoNumber([2,10,3]);
      // condenseArraytoNumber([1]);
      // condenseArraytoNumber([5,0,4,1,2]);

      // 1. Add and Subtract

      function addSubstract(array = []) {
        let sumOriginal = 0;
        let sumNew = 0;

        for (let index = 0; index < array.length; index++) {
          sumOriginal += array[index];

          if (array[index] % 2 == 0) {
            array[index] += index;
          } else {
            array[index] -= index;
          }

          sumNew += array[index];
        }

        console.log(array);
        console.log(sumOriginal);
        console.log(sumNew);

      }

      // addSubstract([5, 15, 23, 56, 35]);
      // addSubstract([-5, 11, 3, 0, 2]);

      // 2. Common Elements

      function findMathces(arr1, arr2) {
        const matches = [];

        for (let index1 = 0; index1 < arr1.length; index1++) {

          for (let index2 = 0; index2 < arr2.length; index2++) {            
            if (arr1[index1] === arr2[index2]) {
              matches.push(arr1[index1]);
            }
          }

        }

        for (let index = 0; index < matches.length; index++) {
          console.log(matches[index]);
        }

      }

      // findMathces(['Hey', 'hello', 2, 4, 'Peter', 'e'], ['Petar', 10, 'hey', 4, 'hello', '2']);
      // findMathces(['S', 'o', 'f', 't', 'U', 'n', 'i', ' '], ['s', 'o', 'c', 'i', 'a', 'l']);

      // 3. Merge Arrays

      function mergeArrays(arr1, arr2) {
        const arr3 = [];
        
        for (let index = 0; index < arr1.length; index++) {
          if (index % 2 == 0) {
            let sum = Number(arr1[index]) + Number(arr2[index]);
            arr3.push(sum);
            // console.log(sum);
          } else {
            let concat = arr1[index] + arr2[index];
            arr3.push(concat);
          }
        }

        console.log(arr3.join(" - "));

      }

      // mergeArrays(['5', '15', '23', '56', '35'], ['17', '22', '87', '36', '11']);
      // mergeArrays(['13', '12312', '5', '77', '4'], ['22', '333', '5', '122', '44']);

      // 04. Array Rotation

      function rotateArray(array, rotations) {
        rotations = rotations % array.length;

        for (let rotation = 0; rotation < rotations; rotation++) {
          const first = array.shift();
          array.push(first);
        }

        console.log(array.join(" "));

      }

      // rotateArray([51, 47, 32, 61, 21], 2);
      // rotateArray([32, 21, 61, 1], 4);
      // rotateArray([2, 4, 15, 31], 5);
    </script>
  </body>
</html>