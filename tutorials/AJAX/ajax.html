<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX | XMLHttpRequest</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
    <style>
      @import url('https://fonts.googleapis.com/css?family=Lato');
@import url('https://fonts.googleapis.com/css?family=PT+Sans');
*{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
html{
    font-family: "PT sans", sans-serif;
    font-size: 24px;
    color: #234465;
}
body{
    display: flex;
    flex-direction: column;
    margin: 0;
    min-height: 100vh;
    flex-wrap: wrap;
}

#exercise{   
    width: 70%;
    float: left;
    padding: 1rem 0 1rem 1rem;
}
main:after{
    display: block;
    content:'';
    clear: both;
}
button{
    padding: 0.3rem 0.5rem;
    font-size: 0.7em;
    margin: 1rem 0 1rem 0;
    border: none;
    color: white;
    background: #234465;
    border-radius: 5px;
    outline: none;
}

table{
    margin: 0 auto;
    text-align: center;
    border:none;
}

td{
    width: 10%;
    border:2px solid gray;
    height: 5vh;
    color: #234465;
    font-size: 22px;
    margin:0;
    padding:0;
	background-color: aliceblue;
	border:1px solid #234465;
}

input{
    width: 95%;
    text-align: center;
    background: aliceblue;
    border: none;
    font-family: Calibri;
    font-size: 22px;
}

input[type='number'] {
    -moz-appearance:textfield;
}

input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
    -webkit-appearance: none;
}

#check{
	margin: 0 auto;
    text-align: center;
    font-weight: bold;
    font-size: 24px;
}
    </style>
  </head>
  <body>
    <!-- <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1> -->

    <div id="container">
      <main id="main">
        <div id="exercise">
          <table>
            <thead>
              <tr>
                <th colspan="9">SUDOMU</th>
              </tr>
            </thead>
            <tfoot>
              <tr>
                <td colspan="3">
                  <button>Quick Check</button>
                  <button>Clear</button>
                </td>
              </tr>
            </tfoot>
            <tbody>
              <tr>
                <td>
                  <input min="1" max="3" type="number" />
                </td>
                <td>
                  <input min="1" max="3" type="number" />
                </td>
                <td>
                  <input min="1" max="3" type="number" />
                </td>
              </tr>
              <tr>
                <td>
                  <input min="1" max="3" type="number" />
                </td>
                <td>
                  <input min="1" max="3" type="number" />
                </td>
                <td>
                  <input min="1" max="3" type="number" />
                </td>
              </tr>
              <tr>
                <td>
                  <input min="1" max="3" type="number" />
                </td>
                <td>
                  <input min="1" max="3" type="number" />
                </td>
                <td>
                  <input min="1" max="3" type="number" />
                </td>
              </tr>
  
            </tbody>
          </table>
          <div id="check">
            <p></p>
          </div>
        </div>
      </main>
      <script>
        solve();
        function solve() {
    const table = document.querySelector("table");
    const tr = document.querySelectorAll("tbody tr");
    const [ checkBtn, clearBtn ] = document.getElementsByTagName("button");
    const resultField = document.querySelector("#check p");

    // console.log(tr);
    // const firstRow = tr[0];
    // const firstRowInputs = firstRow.querySelectorAll("input");
    // console.log(firstRowInputs);

    checkBtn.addEventListener("click", () => {
        const matrix = [];

        for (let row = 0; row < tr.length; row++) {
            const currentRow = tr[row];
            const currentRowInputs = currentRow.querySelectorAll("input");
            // console.log(currentRowInputs);
            const arr = [];
    
            for (let col = 0; col < currentRowInputs.length; col++) {
                // console.log(currentRowInputs[col]);
                arr.push(Number(currentRowInputs[col].value));
            }
    
            matrix.push(arr);
        }
    
        // console.log(matrix);
    
        const sum = matrix[0].reduce((acc, x) => acc + x, 0);
        // console.log(sum);
        let isOver = false;

        if (sum > 0) {
    
            for (let row = 1; row < tr.length; row++) {
                const currentRow = tr[row];
                const currentRowInputs = currentRow.querySelectorAll("input");
                const current = Array.from(currentRowInputs).reduce((acc, x) => acc + Number(x.value), 0);
        
                if (sum != current) {
                    // console.log("fail");
                    isOver = true;
                    break;
                }
            }
        
            for (let col = 0; col < matrix[0].length; col++) {
                let current = 0;
        
                for (let row = 0; row < matrix.length; row++) {
                    current += matrix[row][col];
                    // console.log(col, row);
                    // console.log(row, col);
                }
        
                if (sum != current) {
                    // console.log("fail");
                    isOver = true;
                    break;
                }
            }
    
        } else {
            isOver = true;
        }
        
        if (isOver) {
            table.style.border = "2px solid red";
            resultField.textContent = "NOP! You are not done yet...";
            resultField.style.color = "red";
        } else {
            table.style.border = "2px solid green";
            resultField.textContent = "You solve it! Congratulations!";
            resultField.style.color = "green";
        }
    
    })

    clearBtn.addEventListener("click", () => {
        const inputs = document.querySelectorAll("tbody input");

        for (const input of inputs) {
            input.value = "";
        }

        table.style = "";
        resultField.textContent = "";
        resultField.style = "";
    })

}
      </script>
    </div>
    <script>
      // 02. Meetings

function createShedule(params) {
// console.log(params);
const meetings = {};

for (const input of params) {
  // console.log(input);
  const data = input.split(' ');
  // console.log(data);
  const day = data[0];
  const name = data[1];

  if (meetings[day]) {
    console.log(`Conflict on ${day}!`);
  } else {
    meetings[day] = name;
    console.log(`Scheduled for ${day}`);
  }
}

// console.log(meetings);
for (const day in meetings) {
  const name = meetings[day]
  console.log(`${day} -> ${name}`);
}

}

// createShedule(['Monday Peter', 'Wednesday Bill', 'Monday Tim', 'Friday Tim']);
// createShedule(['Friday Bob', 'Saturday Ted', 'Monday Bill', 'Monday John', 'Wednesday George']);
    </script>

<script>
  // 10. Contacts Builder✶
  // 11. View Model✶
  // 12. Payment Package
  // 13. String Builder *✶
</script>

    <!-- ================= Get data from local JSON file ================= -->

    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>

    <script>
      const matches4 = `
      40 Desert Blade (Fragment)
40 Minotaur's Head (Fragment)
40 Diviner's Orb - Recipe (Fragment)
50 Panoptic Orb - Recipe (Fragment)
80 Hand of Glory (Fragment)

40 Book of Prophecies - Recipe (Fragment)
50 Book of Fate - Recipe (Fragment)
80 Flaming Heart (Fragment)
160 Pastor's Seal (Fragment)

80 Riversar's Tiara (Fragment)
`;
      const matches3 = `740/120/100      640/320/150`;

const patern = /[0-9]+/g;

const result = matches3.match(patern).reduce((acc, n) => acc + Number(n), 0);
console.log(result);
    </script>
  </body>
</html>