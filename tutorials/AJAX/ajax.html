<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX | XMLHttpRequest</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      fieldset {
        display: none;
      }

      body {
        font-family: Georgia, 'Times New Roman', Times, serif;
        background-color: #f1f1f1;
      }

      .services {
        width: 80%;
        min-height: 100vh;
        margin: 0 auto;
        display: flex;
        align-content: center;
        justify-content: center;
        flex-direction: column;
      }

      .services h1 {
        font-size: 48px;
        margin: 30px;
        text-align: center;
        text-transform: capitalize;
      }
      .services p {
        margin-bottom: 50px;
        font-size: 16px;
        text-align: center;
      }

      .container {
        margin: 0 auto;
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        text-align: center;
      }

      .box {
        width: 500px;
        height: 150px;
        margin-right: 20px;
        margin-bottom: 10px;
        padding: 10px 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-top: 1px solid rgba(0, 0, 0, 0.2);
        border-radius: 20px;
        background-color: #fff;
        box-shadow: 10px 10px 30px rgba(0, 0, 0, 0.2);
      }

      .icon {
        width: 150px;
        height: 110px;
      }
      .icon i {
        color: red;
        font-size: 60px;
      }

      .details {
        height: 110px;
      }
      .details h3 {
        margin-bottom: 10px;
        font-size: 25px;
        text-align: left;
      }
      .details p {
        text-align: left;
      }

      @media screen and (max-width: 768px) {
        .container {
          width: 98%;
          margin: 0 auto;
        }
        .box {
          height: 180px;
          margin-bottom: 20px;
        }
      }
    </style>
  </head>
  <body>
    <div class="services">
      <h1>services</h1>
      <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Cum fugiat ratione est reprehenderit nemo id quibusdam nisi magnam dolor maxime corporis nesciunt non at incidunt eum ut soluta, unde sint voluptatem quisquam facilis explicabo autem in. Libero delectus eligendi, facilis molestias tempora aperiam nisi dignissimos.</p>

      <div class="container">
        <div class="box">
          <div class="icon">
            <i class="fa fa-building-o"></i>
          </div>
          <div class="details">
            <h3>Lorem, ipsum</h3>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Nemo, in asperiores. Quam, consequuntur hic.</p>
          </div>
        </div>
        <div class="box">
          <div class="icon">
            <i class="fa fa-whatsapp"></i>
          </div>
          <div class="details">
            <h3>Lorem, ipsum</h3>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Nemo, in asperiores. Quam, consequuntur hic.</p>
          </div>
        </div>
        <div class="box">
          <div class="icon">
            <i class="fa fa-sitemap"></i>
          </div>
          <div class="details">
            <h3>Lorem, ipsum</h3>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Nemo, in asperiores. Quam, consequuntur hic.</p>
          </div>
        </div>
        <div class="box">
          <div class="icon">
            <i class="fa fa-shield"></i>
          </div>
          <div class="details">
            <h3>Lorem, ipsum</h3>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Nemo, in asperiores. Quam, consequuntur hic.</p>
          </div>
        </div>
        <div class="box">
          <div class="icon">
            <i class="fa fa-truck"></i>
          </div>
          <div class="details">
            <h3>Lorem, ipsum</h3>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Nemo, in asperiores. Quam, consequuntur hic.</p>
          </div>
        </div>
        <div class="box">
          <div class="icon">
            <i class="fa fa-bar-chart"></i>
          </div>
          <div class="details">
            <h3>Lorem, ipsum</h3>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Nemo, in asperiores. Quam, consequuntur hic.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1> -->

    <!-- ================= Get data from local JSON file ================= -->
    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>
  </body>
</html>