<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AJAX | XMLHttpRequest</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  </head>
  <body>
    <h1><span>AJAX</span> XMLHttpRequest(HTTPMethod, url, )</h1>

    <!-- ================= Get data from local JSON file ================= -->

    <fieldset>
      <legend>Get all users from local JSON file</legend>
      <button id="local">Send Request</button>
    </fieldset>

    <script>
      const btnLocalJSON = document.querySelector("#local");
      btnLocalJSON.addEventListener("click", getAllUsersFromLocalFile);

      function getAllUsersFromLocalFile() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const responseAsObject = JSON.parse(this.responseText);
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'users.js', true);
        users.send();
      }
    </script>

    <!-- ================= Get data from GitHub API ================= -->
    <fieldset>
      <legend>Get users from GitHub API</legend>
      <button id="github">Send Request</button>
      <span id="userGithub"></span>
    </fieldset>

    <script>
      const btnGithub = document.querySelector("#github");
      btnGithub.addEventListener("click", getUsersFromGithub);

      function getUsersFromGithub() {
        const users = new XMLHttpRequest();

        users.onload = function () {
          if (this.status === 200) {
            try {
              const usersAsArray = JSON.parse(this.responseText);
              const display = document.querySelector("#userGithub");
              const randomIndex = Math.floor(Math.random() * 30);
              display.textContent = usersAsArray[randomIndex].login;
            } catch (error) {
              console.warn('Did not parse the data!');
            }
          } else {
            console.warn('Did not receive the data!');
          }
        };
  
        users.open('get', 'https://api.github.com/users', true);
        users.send();
      }
    </script>

    <script>
      // 1. Sum First and Last Array Elements

      function sumFirstandLastArrayElements(params) {
        const first = params[0];
        const last = params[params.length - 1];

        const sum = first + last;

        console.log(sum);

      }

      // sumFirstandLastArrayElements([20, 30, 40]);
      // sumFirstandLastArrayElements([10, 17, 22, 33]);
      // sumFirstandLastArrayElements([11, 58, 69]);

      // 2. Day of Week

      function printDayofWeek(num) {
        const days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];

        let day = days[num - 1];

        if (day == undefined) {
          day = 'Invalid day!';
        }

        console.log(day);

      }

      // printDayofWeek(3);
      // printDayofWeek(6);
      // printDayofWeek(11);

      // 3. Reverse an Array of Numbers

      function ReverseArrayofNumbers(num, params) {
        const reversed = [];

        for (let index = 0; index < num; index++) {
          reversed.unshift(params[index]);
        }

        console.log(reversed.join(" "));

      }

      // ReverseArrayofNumbers(3, [10, 20, 30, 40, 5]);
      // ReverseArrayofNumbers(4, [-1, 20, 99, 5]);
      // ReverseArrayofNumbers(2, [66, 43, 75, 89, 47]);

      // 4. Reverse In Place

      function ReverseArray(params) {
        params.reverse();

        console.log(params.join(" "));

      }

      // ReverseArray(['a', 'b', 'c', 'd', 'e']);
      // ReverseArray(['abc', 'def', 'hig', 'klm', 'nop']);
      // ReverseArray(['33', '123', '0', 'dd']);

      // 05. Sum Even Numbers

      function sumEvenNumbers(params) {
        let sum = 0;

        for (let index = 0; index < params.length; index++) {
          const num = Number(params[index]);

          if (num % 2 == 0) {
            sum += num;
          }
        }

        console.log(sum);

      }

      // sumEvenNumbers(['1','2','3','4','5','6']);
      // sumEvenNumbers(['3','5','7','9']);
      // sumEvenNumbers(['2','4','6','8','10']);

      // 06. Even and Odd Subtraction

      function evenAndOddSubtraction(params) {
        let odd = 0;
        let even = 0;

        for (let index = 0; index < params.length; index++) {
          const num = params[index];

          if (num % 2 == 0) {
            even += num;
          } else {
            odd += num;
          }
        }

        let diff = even - odd;

        console.log(diff);

      }

      // evenAndOddSubtraction([1,2,3,4,5,6]);
      // evenAndOddSubtraction([3,5,7,9]);
      // evenAndOddSubtraction([2,4,6,8,10]);

      // 07. Equal Arrays

      function sravniArrays(arr1, arr2) {
        let sum = 0;
        let areEqual = true;

        // if (arr1.length != arr2.length) {
        //   areEqual = false;
        // }

        for (let index = 0; index < arr1.length; index++) {
          if (arr1[index] != arr2[index]) {
            areEqual = false;
            console.log(`Arrays are not identical. Found difference at ${index} index`);
            index = arr1.length;
          } else {
            sum +=Number(arr1[index]);
            // console.log(sum);
          }
        }

        if (areEqual) {
          console.log(`Arrays are identical. Sum: ${sum}`);
        }

      }

      // sravniArrays(['10','20','30'], ['10','20','30']);
      // sravniArrays(['1','2','3','4','5'], ['1','2','4','4','5']);
      // sravniArrays(['1'], ['10']);
    </script>

    <script>
            // 8. Condense Array to Number

            function condenseArraytoNumber(params) {
        // params.push(0);
        // console.log(params);
        
        while (params.length > 2) {
          let newArray = [];

          for (let index = 0; index < params.length - 1; index++) {
            const current = params[index];
            // console.log(current);
            const next = params[index + 1];
            // console.log(next);
            let sum = current + next;
            newArray.push(sum);
          }

          params = newArray;
          // params.pop();
          // console.log(params);

        }

        let sum = 0;

        for (let index = 0; index < params.length; index++) {
          sum = sum + params[index];
        }

        console.log(sum);

      }

      // condenseArraytoNumber([2,10,3]);
      // condenseArraytoNumber([1]);
      // condenseArraytoNumber([5,0,4,1,2]);

      // 1. Add and Subtract

      function addSubstract(array = []) {
        let sumOriginal = 0;
        let sumNew = 0;

        for (let index = 0; index < array.length; index++) {
          sumOriginal += array[index];

          if (array[index] % 2 == 0) {
            array[index] += index;
          } else {
            array[index] -= index;
          }

          sumNew += array[index];
        }

        console.log(array);
        console.log(sumOriginal);
        console.log(sumNew);

      }

      // addSubstract([5, 15, 23, 56, 35]);
      // addSubstract([-5, 11, 3, 0, 2]);

      // 2. Common Elements

      function findMathces(arr1, arr2) {
        const matches = [];

        for (let index1 = 0; index1 < arr1.length; index1++) {

          for (let index2 = 0; index2 < arr2.length; index2++) {            
            if (arr1[index1] === arr2[index2]) {
              matches.push(arr1[index1]);
            }
          }

        }

        for (let index = 0; index < matches.length; index++) {
          console.log(matches[index]);
        }

      }

      // findMathces(['Hey', 'hello', 2, 4, 'Peter', 'e'], ['Petar', 10, 'hey', 4, 'hello', '2']);
      // findMathces(['S', 'o', 'f', 't', 'U', 'n', 'i', ' '], ['s', 'o', 'c', 'i', 'a', 'l']);

      // 3. Merge Arrays

      function mergeArrays(arr1, arr2) {
        const arr3 = [];
        
        for (let index = 0; index < arr1.length; index++) {
          if (index % 2 == 0) {
            let sum = Number(arr1[index]) + Number(arr2[index]);
            arr3.push(sum);
            // console.log(sum);
          } else {
            let concat = arr1[index] + arr2[index];
            arr3.push(concat);
          }
        }

        console.log(arr3.join(" - "));

      }

      // mergeArrays(['5', '15', '23', '56', '35'], ['17', '22', '87', '36', '11']);
      // mergeArrays(['13', '12312', '5', '77', '4'], ['22', '333', '5', '122', '44']);

      // 04. Array Rotation

      function rotateArray(array, rotations) {
        rotations = rotations % array.length;

        for (let rotation = 0; rotation < rotations; rotation++) {
          const first = array.shift();
          array.push(first);
        }

        console.log(array.join(" "));

      }

      // rotateArray([51, 47, 32, 61, 21], 2);
      // rotateArray([32, 21, 61, 1], 4);
      // rotateArray([2, 4, 15, 31], 5);
    </script>
    <script>
            // 5. Max Number

            function findMaxNumber(array) {
        const topIntegers = [];
        
        for (let index = 0; index < array.length; index++) {
          let isTop = true;

          for (let index2 = index + 1; index2 < array.length; index2++) {
            if (array[index2] >= array[index]) {
              isTop = false;
              index2 = array.length;
            }
          }

          if (isTop) {
            topIntegers.push(array[index]);
          }

        }

        console.log(topIntegers.join(" "));

      }

      // findMaxNumber([1, 4, 3, 2]);
      // findMaxNumber([14, 24, 3, 19, 15, 17]);
      // findMaxNumber([41, 41, 34, 20]);
      // findMaxNumber([27, 19, 42, 2, 13, 45, 48]);

      // 06. Equal Sums

      function findEqualSum(array) {
        let index = null;
        array.unshift(0);
        array.push(0);

        // console.log(array);
        
        for (let i = 1; i < array.length - 1; i++) {
          let left = 0;
          let right = 0;

          for (let leftindex = i - 1; leftindex >= 0; leftindex--) {
            left += array[leftindex];
          }

          for (let rightIndex = i + 1; rightIndex < array.length; rightIndex++) {
            right += array[rightIndex];
          }

          if (left == right) {
            index = i - 1;
          }

        }

        if (typeof index == "number") {
          console.log(index);
        } else {
          console.log("no");
        }

      }

      // findEqualSum([1, 2, 3, 3]);
      // findEqualSum([1, 2]);
      // findEqualSum([1]);
      // findEqualSum([1, 2, 3]);
      // findEqualSum([10, 5, 5, 99, 3, 4, 2, 5, 1, 1, 4]);

      // 7. Max Sequence of Equal Elements

      function findMaxSequenceofEqualElements(array) {
        let sequence = [];

        for (let index = 0; index < array.length; index++) {

          if (array[index] == array[index + 1]) {
            let newSequence = [];
            newSequence.push(array[index]);

            while (array[index] == array[index + 1]) {
              newSequence.push(array[index]);
              index++;

              if (index > 20) {
                break;
              }
            }

            if (newSequence.length > sequence.length) {
              sequence = newSequence;
            }

          }

        }

        console.log(sequence.join(" "));

      }

      // findMaxSequenceofEqualElements([2, 1, 1, 2, 3, 3, 2, 2, 2, 1]);
      // findMaxSequenceofEqualElements([1, 1, 1, 2, 3, 1, 3, 3]);
      // findMaxSequenceofEqualElements([4, 4, 4, 4]);
      // findMaxSequenceofEqualElements([0, 1, 1, 5, 2, 2, 6, 3, 3]);

      // 08. Magic Sum

      function findMagicSum(array, mn) {
        
        for (let index = 0; index < array.length; index++) {

          for (let index2 = index + 1; index2 < array.length; index2++) {            
            const sum = array[index] + array[index2];
            
            if (sum == mn) {
              // console.log(sum, mn);
              console.log(array[index] + " " + array[index2]);
            }

          }
        }

      }

      // findMagicSum([1, 7, 6, 2, 19, 23], 8);
      // findMagicSum([14, 20, 60, 13, 7, 19, 8], 27);
      // findMagicSum([1, 2, 3, 4, 5, 6], 6);

      // 09. Dungeonest Dark

      function setGame(rooms) {
        let HP = 100;
        let totalCoins = 0;
        let isDead = false;

        const inputType = {
          potion: "potion", 
          chest: "chest", 
          undefined: "monster"
        }

        const options = {
          potion: function(type, health) {
            health = Number(health);
            if (HP + health > 100) {
              health = 100 - HP;
              HP = 100;
            } else {
              HP += health;
            }
            console.log(`You healed for ${health} hp.`);
            console.log(`Current health: ${HP} hp.`);
          }, 
          chest: function(type, coins) {
            coins = Number(coins);
            totalCoins += coins;
            console.log(`You found ${coins} coins.`);
          }, 
          monster: function(monster, attack, room) {
            if (attack >= HP) {
              isDead = true;
              console.log(`You died! Killed by ${monster}.`);
              console.log(`Best room: ${room}`);
            } else {
              HP -= attack;
              console.log(`You slayed ${monster}.`);
            }
          }
        }

        const roomsAsArray = rooms[0].split("|");

        // console.log(roomsAsArray);

        for (let room = 0; room < roomsAsArray.length; room++) {
          const roomData = roomsAsArray[room].split(" ");

          let roomContent = roomData[0];
          roomContent = inputType[roomContent];
          roomContent = inputType[roomContent];
          // console.log(roomContent);
          let action = options[roomContent];
          // console.log(action);

          action(roomData[0], roomData[1], room + 1);

          if (isDead) {
            room = roomsAsArray.length;
          }

        }

        if (!isDead) {
          console.log("You've made it!");
          console.log(`Coins: ${totalCoins}`);
          console.log(`Health: ${HP}`);
        }
      }

      // setGame(["rat 10|bat 20|potion 10|rat 10|chest 100|boss 70|chest 1000"]);
      // setGame(["cat 10|potion 30|orc 10|chest 10|snake 25|chest 110"]);

      // 10. * Ladybugs

      function playLadybugs(params) {
        const fieldSize = params[0]
        const ladybugsPositions = params[1].split(" ");
        // console.log(ladybugsPositions);
        // const flights = params[2];

        const field = [];
        field.length = fieldSize;
        field.fill(0);
        
        for (let index = 0; index < ladybugsPositions.length; index++) {
          const position = Number(ladybugsPositions[index]);

          if (position < fieldSize) {
            field[position] = 1;
            // console.log(field);
          }
        }

        for (let flight = 2; flight < params.length; flight++) {
          let currentFlight = params[flight].split(" ");
          // console.log(currentFlight);
          let start = Number(currentFlight[0]);
          let direction = currentFlight[1];
          let end = Number(currentFlight[2]);
          // console.log(start, direction, end);
          
          if (start >= 0 && start < fieldSize && field[start] == 1) {
            const directions = {
              left: function(position, number) {
                return position -= number;
              }, 
              right: function(position, number) {
                return position += number;
              }
            }

            const newPosition = directions[direction](start, end);
            // console.log(newPosition);
            field[start] = 0;

            if (newPosition >= 0 && newPosition < fieldSize) {
              field[newPosition] = 1;
            }

          }
        }

        console.log(field.join(" "));

      }

      playLadybugs([3, '0 1', '0 right 1', '2 right 1']);
      playLadybugs([ 3, '0 1 2', '0 right 1', '1 right 1', '2 right 1']);
      playLadybugs([ 5, '3', '3 left 2', '1 left -2']);
    </script>
    <script>
      // 5. Amazing Numbers

      function findAmazingNumber(num) {
        let isAmazing = "False";

        const numAsString = String(num);
        let sum = 0;

        for (let index = 0; index < numAsString.length; index++) {
          const digit = Number(numAsString[index]);
          sum += digit;
        }

        const sumAsString = String(sum);

        for (let index = 0; index < sumAsString.length; index++) {
          const digit = sumAsString[index];

          if (digit == "9") {
            isAmazing = "True";
            index = sumAsString.length;
          }

        }

        console.log(`${num} Amazing? ${isAmazing}`);

      }

      // findAmazingNumber(1233);
      // findAmazingNumber(999);

      // 06. Gramophone

      function findsongDuration(band, album, song) {
        let duration = (album.length * band.length) * song.length / 2;
        const rotations = Math.ceil(duration / 2.5);
        console.log(`The plate was rotated ${rotations} times.`);
      }

      // findsongDuration('Black Sabbath', 'Paranoid', 'War Pigs');
      // findsongDuration('Rammstein', 'Sehnsucht', 'Engel');

      // 07. Required reading 

      function calcReadingDailyTime(pages, pagesPerHour, days) {
        const totalTime = pages / pagesPerHour;
        const dailyHours = totalTime / days;
        console.log(dailyHours);
      }

      // calcReadingDailyTime(212, 20, 2);
      // calcReadingDailyTime(432, 15, 4);

      // 8. Centuries to Minutes

      function convertCenturiestoMinutes(centuries) {
        const years = centuries * 100;
        const days = Math.trunc(years * 365.2422);
        const hours = days * 24;
        const minutes = hours * 60;

        console.log(`${centuries} centuries = ${years} years = ${days} days = ${hours} hours = ${minutes} minutes`);

      }

      // convertCenturiestoMinutes(1);
      // convertCenturiestoMinutes(5);

      // 09. Special Numbers

      function findSpecialNumber(num) {
        for (let index = 1; index <= num; index++) {
          let sum = 0;
          const indexAsString = String(index);

          for (let index = 0; index < indexAsString.length; index++) {
            const digit = Number(indexAsString[index]);
            sum += digit;
          }

          if (sum == 5 || sum == 7 || sum == 11) {
            console.log(`${index} -> True`);
          } else {
            console.log(`${index} -> False`);
          }
        }
      }

      // findSpecialNumber(15);
      // findSpecialNumber(20);

      // 10. Triples of Latin Letters

      function printTriplesofNLatinLetters(n) {
        n = Number(n);
        // console.log(String.fromCharCode(97));
        for (let first = 97; first < n + 97; first++) {
          const firstLetter = String.fromCharCode(first);
          
          for (let second = 97; second < n + 97; second++) {
            const secondLetter = String.fromCharCode(second);
            
            for (let third = 97; third < n + 97; third++) {
              const thirdLetter = String.fromCharCode(third);
              const result = firstLetter + secondLetter + thirdLetter;
              console.log(result);
            }
          }
        }
      }

      // printTriplesofNLatinLetters("3");
      // printTriplesofNLatinLetters("2");

      // 05. Binary to Decimal

      function convertBtoD(b) {
        const digit = parseInt(b, 2);
        console.log(digit);
      }

      // convertBtoD("00001001");
      // convertBtoD("11110000");

      // 07. Triangle Area

      function calcTraingleArea(side1, side2, side3) {
        // calculate the semi-perimeter
        const s = (side1 + side2 + side3) / 2;

        //calculate the area
        const areaValue = Math.sqrt(
          s * (s - side1) * (s - side2) * (s - side3)
        );

        console.log(areaValue);

      }

      calcTraingleArea(2, 3.5, 4);
      calcTraingleArea(3, 5.5, 4);
    </script>
  </body>