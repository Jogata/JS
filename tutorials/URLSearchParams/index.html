<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>URLSearchParams in JS</title>
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@3.2.0/fonts/remixicon.css"/> -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
<style>
  header {
    margin-top: 3rem;
    display: flex;
    flex-direction: column-reverse;
    text-align: center;
  }
  h1 span {
    color: brown;
    font-style: italic;
    text-decoration-color: brown;
    text-decoration-thickness: 2px;
    /* text-underline-offset: 8px; */
    text-decoration: underline;
  }
  h2 {
    font-size: 0.5rem;
    font-family: Georgia;
  }
</style>
  </head>
  <body>
    <!-- <h1>URLSearchParams in JavaScript - Constructing Query Strings</h1> -->
<header>
  <h1>03. Movie Theater - <span>Unit tests</span> </h1>
  <h2>JS Advanced Retake Exam - 10 August 2022</h2>
</header>

<script>
const movieTheater = {
  ageRestrictions(movieRating) {
    switch (movieRating) {
      case "G":
        return "All ages admitted to watch the movie";
      case "PG":
        return "Parental guidance suggested! Some material may not be suitable for pre-teenagers";
      case "R":
        return "Restricted! Under 17 requires accompanying parent or adult guardian";
      case "NC-17":
        return "No one under 17 admitted to watch the movie";
      default:
        return "There are no age restrictions for this movie";
    }
  },
  moneySpent(tickets, food, drinks) {
    if (
      typeof tickets !== "number" ||
      !Array.isArray(food) ||
      !Array.isArray(drinks)
    ) {
      throw new Error("Invalid input");
    }

    let bill = 0;

    bill += tickets * 15;

    food.forEach((element) => {
      switch (element) {
        case "Nachos":
          bill += 6;
          break;
        case "Popcorn":
          bill += 4.5;
          break;
      }
    });

    drinks.forEach((element) => {
      switch (element) {
        case "Soda":
          bill += 2.5;
          break;
        case "Water":
          bill += 1.5;
          break;
      }
    });

    if (bill > 50) {
      bill -= bill * 0.2;
      return `The total cost for the purchase with applied discount is ${bill.toFixed(
        2
      )}`;
    } else {
      return `The total cost for the purchase is ${bill.toFixed(2)}`;
    }
  },
  reservation(rowsArray, neededSeatsCount) {
    if (!Array.isArray(rowsArray) || typeof neededSeatsCount !== "number") {
      throw new Error("Invalid input");
    }

    let availableRows = [];
    rowsArray.forEach((row) => {
      if (row.freeSeats >= neededSeatsCount) {
        availableRows.push(row.rowNumber);
      }
    });

    return Math.max(...availableRows);
  },
};

describe("movie theater", () => {
  describe("ageRestrictions", () => {
    it("should sth", () => {
      assert.equal(
        movieTheater.ageRestrictions("G"),
        `All ages admitted to watch the movie`
      );
    });

    
    it("should sth", () => {
      assert.equal(
        movieTheater.ageRestrictions("PG"),
        `Parental guidance suggested! Some material may not be suitable for pre-teenagers`
      );
    });

    it("should sth", () => {
      assert.equal(
        movieTheater.ageRestrictions("R"),
        `Restricted! Under 17 requires accompanying parent or adult guardian`
      );
    });

    it("should sth", () => {
      assert.equal(
        movieTheater.ageRestrictions("NC-17"),
        `No one under 17 admitted to watch the movie`
      );
    });

    it("should sth", () => {
      assert.equal(
        movieTheater.ageRestrictions("NASDF"),
        `There are no age restrictions for this movie`
      );
    });
  });
})
</script>
        
    <script src="./in-fetch-api.js"></script>
    <script src="js.js">
      // Create Query String as String
      const queryStringSample = 'name=Dom&age=36&occupation=Software+Developer';
      // Create URLSearchParams Object from String
      const uspFromString = new URLSearchParams(queryStringSample);
      console.log(uspFromString);


      // Create Query String as Object
      const queryStringSampleAsObject = {
        name: 'Dom',
        age: 36,
        occupation: 'Software Developer',
      };

      // Create URLSearchParams Object from Object
      const uspFromObject = new URLSearchParams(queryStringSampleAsObject);

      // Get Param from URLSearchParams
      const name = uspFromObject.get('name');
      console.log(`Value of 'name': ${name}`);

      // Change Param in URLSearchParams
      uspFromObject.set('name', 'New Name');
      // Set New Param in URLSearchParams
      uspFromObject.set('programming language', 'JavaScript');

      for (const [key, value] of uspFromObject) {
        console.log(`${key} => ${value}`);
      }

      // Convert URLSearchParams Object to Query String
      console.log(uspFromString.toString());
      console.log(uspFromObject.toString());
    </script>
  </body>
</html>