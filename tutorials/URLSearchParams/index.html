<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>URLSearchParams in JS</title>
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@3.2.0/fonts/remixicon.css"/> -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  </head>
  <body>
    <h1>URLSearchParams in JavaScript - Constructing Query Strings</h1>

<header style="display: block;">
  <h2>JS Advanced Exam Prep - 20 February 2021</h2>
  <a href="../../00exams/JS Advanced Regular Exam - 20 February 2021">Open folder</a>
</header>

<script>
  class ChristmasDinner {
    constructor(budget) {
        if (+budget < 0) {
            throw new Error('The budget cannot be a negative number');
        }
        this.budget = +budget;
        this.dishes = [];
        this.products = [];
        this.guests = {};
    }

    shopping(product) {
        let [name, price] = product;
        if (+price > this.budget) {
            throw new Error('Not enough money to buy this product');
        }
        this.budget -= price;
        this.products.push(name);
        return `You have successfully bought ${name}!`;
    }

    recipes(recipe) {
        let isPresent = true;
        let { recipeName, productsList } = recipe;
        productsList.forEach((product) => {
            if (!this.products.includes(product)) {
                isPresent = false;
            }
        });
        if (isPresent) {
            this.dishes.push({ recipeName, productsList });
            return `${recipeName} has been successfully cooked!`;
        }
        throw new Error('We do not have this product');
    }

    inviteGuests(name, dish) {
        let isPresent = false;
        this.dishes.forEach((obj) => {
            if (obj.recipeName === dish) {
                isPresent = true;
            }
        });
        if (!isPresent) {
            throw new Error('We do not have this dish');
        }
        if (name in this.guests) {
            throw new Error('This guest has already been invited');
        }
        this.guests[name] = dish;
        return `You have successfully invited ${name}!`;
    }

    showAttendance() {
        let output = '';
        Object.keys(this.guests).forEach(name => {
            let dish = this.guests[name];
            let products = [];
            this.dishes.forEach((curDish) => {
                if (curDish.recipeName === dish) {
                    products = curDish.productsList;
                }
            });
            output += `${name} will eat ${dish}, which consists of ${products.join(', ')}\n`;
        });
        return output.trim();
    }
}
</script>
<script>
  const numberOperations = {
    powNumber: function (num) {
        return num * num;
    },
    numberChecker: function (input) {
        input = Number(input);

        if (isNaN(input)) {
            throw new Error('The input is not a number!');
        }

        if (input < 100) {
            return 'The number is lower than 100!';
        } else {
            return 'The number is greater or equal to 100!';
        }
    },
    sumArrays: function (array1, array2) {

        const longerArr = array1.length > array2.length ? array1 : array2;
        const rounds = array1.length < array2.length ? array1.length : array2.length;

        const resultArr = [];

        for (let i = 0; i < rounds; i++) {
            resultArr.push(array1[i] + array2[i]);
        }

        resultArr.push(...longerArr.slice(rounds));

        return resultArr;
    }
};
</script>
<script>
  // 03. Fibonacci

  function getFibonator() {
    // console.log(params);
    let n1 = 0;
    let n2 = 1;
    
    return function () {
      let fib = n1 + n2;
      n1 = n2;
      n2 = fib;
      console.log(n1);
      return n1;
    }
  }

  // let fib = getFibonator();
  // fib();
  // fib();
  // fib();
  // fib();
  // fib();
  // fib();
  // fib();
</script>

    <script src="./in-fetch-api.js"></script>
    <script src="js.js">
      // Create Query String as String
      const queryStringSample = 'name=Dom&age=36&occupation=Software+Developer';
      // Create URLSearchParams Object from String
      const uspFromString = new URLSearchParams(queryStringSample);
      console.log(uspFromString);

      // Create Query String as Object
      const queryStringSampleAsObject = {
        name: 'Dom',
        age: 36,
        occupation: 'Software Developer',
      };

      // Create URLSearchParams Object from Object
      const uspFromObject = new URLSearchParams(queryStringSampleAsObject);

      // Get Param from URLSearchParams
      const name = uspFromObject.get('name');
      console.log(`Value of 'name': ${name}`);

      // Change Param in URLSearchParams
      uspFromObject.set('name', 'New Name');
      // Set New Param in URLSearchParams
      uspFromObject.set('programming language', 'JavaScript');

      for (const [key, value] of uspFromObject) {
        console.log(`${key} => ${value}`);
      }

      // Convert URLSearchParams Object to Query String
      console.log(uspFromString.toString());
      console.log(uspFromObject.toString());
    </script>
  </body>
</html>
<!-- 55-185 -->