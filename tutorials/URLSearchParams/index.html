<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>URLSearchParams in JS</title>
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@3.2.0/fonts/remixicon.css"/> -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
<style>
*,  
*:before, 
*:after {   
  box-sizing: border-box; 
  -moz-box-sizing: border-box;  
  -webkit-box-sizing: border-box; 
} 

body { 
  color: #384047; 
  font-family: "Nunito", sans-serif;  
  background-color: rgb(202, 214, 191); 
} 

form { 
  max-width: 500px; 
  margin: 10px auto;  
  padding: 10px 20px; 
  border-radius: 8px; 
  background-color: #f4f7f8;  
} 

h1 { 
  margin: 0 0 30px 0; 
  text-align: center; 
} 

input[type="text"],
input[type="password"],
input[type="date"],
input[type="datetime"],
input[type="email"],
input[type="number"],
input[type="search"],
input[type="tel"],
input[type="time"],
input[type="url"],
textarea,
select {
  width: 100%;
  height: 40px;
  margin: 0;
  margin-bottom: 30px;
  padding: 15px;
  color: #242525;
  font-size: 16px;
  border: none;
  outline: none;
  background: rgba(255, 255, 255, 0.1);
  background-color: #e8eeef;
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.03) inset;
}
</style>
  </head>
  <body>
    <h1 hidden>URLSearchParams in JavaScript - Constructing Query Strings</h1>

<header>
  <h2>JS Advanced Regular Exam - 25 June 2022</h2>
  <a href="../../00exams/JS Advanced Regular Exam - 25 June 2022">Open folder</a>
</header>
<h1>Online Car Magazine</h1> 

<div class="container"> 
  <div class="form-wrapper"> 
    <form> 
      <h1>Create offer</h1> 

      <fieldset> 
        <legend><span class="number">1</span> Car Details</legend> 
        <label for="make">Make:</label> 
        <input type="text" id="make" name="make" /> 
        <label for="model">Model:</label> 
        <input type="text" id="model" name="model" /> 
        <label for="year">Production year:</label> 
        <input type="number" id="year" min="1990" max="2022" step="1" value="2017" /> 
        <label for="fuel">Fuel type:</label> 
        <select id="fuel" name="fuel"> 
          <option value="petrol">Petrol</option> 
          <option value="diesel">Diesel</option> 
          <option value="hybrid">Hybrid</option> 
          <option value="electric">Electric</option> 
        </select> 

        <legend><span class="number">2</span> Price</legend> 
        <label for="original-cost">Original cost:</label> 
        <input type="number" id="original-cost" step="10" /> 
        <label for="selling-price">Selling price:</label> 
        <input type="number" id="selling-price" step="10" /> 

        <button id="publish" type="submit">Publish</button> 
    </form> 
  </div> 

  <div class="table-wrapper"> 
    <section> 
      <div class="tbl-header"> 
        <table> 
          <thead> 
            <tr> 
              <th>Make</th> 
              <th>Model</th> 
              <th>Year</th> 
              <th>Fuel</th> 
              <th>Price</th> 
              <th>New Price</th> 
              <th>-</th> 
            </tr> 
          </thead> 
        </table> 
      </div> 
      <div class="tbl-content"> 
        <table> 
          <tbody id="table-body"> 

          </tbody> 
        </table> 
      </div> 
    </section> 

    <section id="sold-wrapper"> 

      <div id="title-bar"> 
        Sold cars:
      </div> 
      <div id="nav"> 
        <span>Make and model</span> 
        <span>Production year</span> 
        <span>Profit made</span> 
      </div> 
      <ul id="cars-list"> 

      </ul> 
    </section> 
    <p>Profit made: <strong id="profit">0.00</strong>$</p> 
  </div> 
</div> 

<script>
  const carService = {
  isItExpensive(issue) {
    if (issue === "Engine" || issue === "Transmission") {
      return `The issue with the car is more severe and it will cost more money`;
    } else {
      return `The overall price will be a bit cheaper`;
    }
  },
  discount(numberOfParts, totalPrice) {
    if (typeof numberOfParts !== "number" || typeof totalPrice !== "number") {
      throw new Error("Invalid input");
    }
    let discountPercentage = 0;
    if (numberOfParts > 2 && numberOfParts <= 7) {
      discountPercentage = 15;
    } else if (numberOfParts > 7) {
      discountPercentage = 30;
    }
    let result = (discountPercentage / 100) * totalPrice;

    if (numberOfParts <= 2) {
      return "You cannot apply a discount";
    } else {
      return `Discount applied! You saved ${result}$`;
    }
  },
  partsToBuy(partsCatalog, neededParts) {
    let totalSum = 0;
    if (!Array.isArray(partsCatalog) || !Array.isArray(neededParts)) {
      throw new Error("Invalid input");
    }
    neededParts.forEach((neededPart) => {
      partsCatalog.map((obj) => {
        if (obj.part === neededPart) {
          totalSum += obj.price;
        }
      });
    });
    return totalSum;
  },
};
</script>
<script>
  describe("Tests car service", () => {
  describe("isItExpensive", () => {
    it("should sth", () => {
      assert.equal(
        carService.isItExpensive("Engine"),
        "The issue with the car is more severe and it will cost more money"
      );
      assert.equal(
        carService.isItExpensive("Transmission"),
        "The issue with the car is more severe and it will cost more money"
      );
    });
    it("should sth", () => {
      assert.equal(
        carService.isItExpensive("Test"),
        "The overall price will be a bit cheaper"
      );
    });
  });
  describe("discount", () => {
    it("should sth", () => {
      assert.equal(carService.discount(1, 100), "You cannot apply a discount");
      assert.equal(carService.discount(2, 100), "You cannot apply a discount");
      assert.equal(
        carService.discount(3, 100),
        `Discount applied! You saved 15$`
      );
      assert.equal(
        carService.discount(7, 100),
        `Discount applied! You saved 15$`
      );
      assert.equal(
        carService.discount(8, 100),
        `Discount applied! You saved 30$`
      );
      assert.equal(
        carService.discount(10, 100),
        `Discount applied! You saved 30$`
      );
    });
    it("should sth", () => {
      assert.throw(() => carService.discount("test", 100), "Invalid input");
      assert.throw(() => carService.discount(20, "test"), "Invalid input");
    });
  });
  describe("partsToBuy", () => {
    it("should", () => {
      assert.throw(
        () => carService.partsToBuy("test", ["asdfa", "asdfafda"]),
        "Invalid input"
      );
      assert.throw(() => carService.partsToBuy(["test"], 1), "Invalid input");
    });
    it("should", () => {
      assert.equal(
        carService.partsToBuy(
          [
            { part: "blowoff valve", price: 145 },
            { part: "coil springs", price: 230 },
          ],
          ["blowoff valve", "injectors"]
        ),
        145
      );
      assert.equal(
        carService.partsToBuy([], ["blowoff valve", "injectors"]),
        0
      );
    });
  });
});
</script>
<script>
    // 03. Largest Number
    function findLargestNumber(n1, n2, n3) {
    let largest = n1;

    if (n2 > largest) {
      largest = n2;
    }
    if (n3 > largest) {
      largest = n3;
    }
    console.log(`The largest number is ${largest}.`);
  }
  // findLargestNumber(5, -3, 16);
  // findLargestNumber(-3, -5, -22.5);
</script>

    <script src="./in-fetch-api.js"></script>
    <script src="js.js">
      // Create Query String as String
      const queryStringSample = 'name=Dom&age=36&occupation=Software+Developer';
      // Create URLSearchParams Object from String
      const uspFromString = new URLSearchParams(queryStringSample);
      console.log(uspFromString);


      // Create Query String as Object
      const queryStringSampleAsObject = {
        name: 'Dom',
        age: 36,
        occupation: 'Software Developer',
      };

      // Create URLSearchParams Object from Object
      const uspFromObject = new URLSearchParams(queryStringSampleAsObject);

      // Get Param from URLSearchParams
      const name = uspFromObject.get('name');
      console.log(`Value of 'name': ${name}`);

      // Change Param in URLSearchParams
      uspFromObject.set('name', 'New Name');
      // Set New Param in URLSearchParams
      uspFromObject.set('programming language', 'JavaScript');

      for (const [key, value] of uspFromObject) {
        console.log(`${key} => ${value}`);
      }

      // Convert URLSearchParams Object to Query String
      console.log(uspFromString.toString());
      console.log(uspFromObject.toString());
    </script>
  </body>
</html>