<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>URLSearchParams in JS</title>
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@3.2.0/fonts/remixicon.css"/> -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
<style>
  body {
    background-position: center;
    background-image: url("./images/login/homeImage.jpeg");
    font-family: Georgia, 'Times New Roman', Times, serif;
  }

  header {
    display: none;
  }

  h1:first-child {
    display: none;
  }
</style>
  </head>
  <body>
    <h1>URLSearchParams in JavaScript - Constructing Query Strings</h1>

<header>
  <h2>JS Advanced Exam Prep - 15 February 2021</h2>
  <a href="../../00exams/JS Advanced Exam Prep - 15 February 2021">Open folder</a>
</header>

<h1>Christmas Gifts Delivery</h1>
<div class="container">
  <section class="card">
    <h2>Add gifts</h2>
    <div>
      <input type="text" placeholder="Gift name" />
      <button>Add gift</button>
    </div>
  </section>
  <section class="card">
    <h2>List of gifts</h2>
    <ul></ul>
  </section>
  <section class="card">
    <h2>Sent gifts</h2>
    <ul></ul>
  </section>
  <section class="card">
    <h2>Discarded gifts</h2>
    <ul></ul>
  </section>
</div>
<script>
  document.addEventListener("load", solve);
</script>
<script>
  function solve() {
    let input = document.querySelector('.card input');
    let button = document.querySelector('.card button');
    let ulElement = document.querySelector('.card ul');

    button.addEventListener('click', e => {
      e.preventDefault();
      let liElement = document.createElement('li');
      liElement.setAttribute('class', 'gift');
      liElement.textContent = input.value;

      let btnSendElement = document.createElement('button');
      btnSendElement.setAttribute('id', 'sendButton');
      btnSendElement.textContent = 'Send';
      let btnDiscardElement = document.createElement('button');
      btnDiscardElement.setAttribute('id', 'discardButton');
      btnDiscardElement.textContent = 'Discard';

      liElement.appendChild(btnSendElement);
      liElement.appendChild(btnDiscardElement);
      ulElement.appendChild(liElement);

      input.value = "";

      let allLiElements = Array.from(ulElement.querySelectorAll('li'));
      let sortedLiElements = allLiElements.sort((a, b) => a.innerText.localeCompare(b.innerText));

      while (ulElement.firstChild) {
        ulElement.firstChild.remove();
      }

      for (const element of sortedLiElements) {
        ulElement.appendChild(element);
      }

      btnSendElement.addEventListener('click', e => {
        e.preventDefault;

        let ulSentElement = document.querySelector('.container > section:nth-of-type(3) > ul');
        e.target.remove();
        btnDiscardElement.remove();
        ulSentElement.appendChild(liElement);
      })

      btnDiscardElement.addEventListener('click', e => {
        e.preventDefault;

        let ulDiscardElement = document.querySelector('.container > section:nth-of-type(4) > ul');
        e.target.remove();
        btnSendElement.remove();
        ulDiscardElement.appendChild(liElement);
      })

    })

  }
</script>

<div class="test" style="display: none;">
  <div class="todo">
    <input class="todo-value" type="text" placeholder="(empty)" value="Take the bins out">
    <input class="todo-checkbox" type="checkbox">
  </div>
  <div class="todo">
    <input class="todo-value" type="text" placeholder="(empty)">
    <input class="todo-checkbox" type="checkbox">
  </div>
  <div class="todo">
    <input class="todo-value" type="text" placeholder="(empty)">
    <input class="todo-checkbox" type="checkbox">
  </div>
  <div class="todo">
    <input class="todo-value" type="text" placeholder="(empty)" value="Take the bins out">
    <input class="todo-checkbox" type="checkbox">
  </div>
  <div class="todo">
    <input class="todo-value" type="text" placeholder="(empty)">
    <input class="todo-checkbox" type="checkbox">
  </div>
  <div class="todo">
    <input class="todo-value" type="text" placeholder="(empty)">
    <input class="todo-checkbox" type="checkbox">
  </div>
  <div class="todo">
    <input class="todo-value" type="text" placeholder="(empty)" value="Take the bins out">
    <input class="todo-checkbox" type="checkbox">
  </div>
  <div class="todo">
    <input class="todo-value" type="text" placeholder="(empty)">
    <input class="todo-checkbox" type="checkbox">
  </div>
  <div class="todo">
    <input class="todo-value" type="text" placeholder="(empty)">
    <input class="todo-checkbox" type="checkbox">
  </div>
  <div class="todo">
    <input class="todo-value" type="text" placeholder="(empty)" value="Take the bins out">
    <input class="todo-checkbox" type="checkbox">
  </div>
  <div class="todo">
    <input class="todo-value" type="text" placeholder="(empty)">
    <input class="todo-checkbox" type="checkbox">
  </div>
  <div class="todo">
    <input class="todo-value" type="text" placeholder="(empty)">
    <input class="todo-checkbox" type="checkbox">
  </div>
</div>

    <script src="./in-fetch-api.js"></script>
    <script src="js.js">
      // Create Query String as String
      const queryStringSample = 'name=Dom&age=36&occupation=Software+Developer';
      // Create URLSearchParams Object from String
      const uspFromString = new URLSearchParams(queryStringSample);
      console.log(uspFromString);

      // Create Query String as Object
      const queryStringSampleAsObject = {
        name: 'Dom',
        age: 36,
        occupation: 'Software Developer',
      };

      // Create URLSearchParams Object from Object
      const uspFromObject = new URLSearchParams(queryStringSampleAsObject);

      // Get Param from URLSearchParams
      const name = uspFromObject.get('name');
      console.log(`Value of 'name': ${name}`);

      // Change Param in URLSearchParams
      uspFromObject.set('name', 'New Name');
      // Set New Param in URLSearchParams
      uspFromObject.set('programming language', 'JavaScript');

      for (const [key, value] of uspFromObject) {
        console.log(`${key} => ${value}`);
      }

      // Convert URLSearchParams Object to Query String
      console.log(uspFromString.toString());
      console.log(uspFromObject.toString());
    </script>
  </body>
</html>