<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>URLSearchParams in JS</title>
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@3.2.0/fonts/remixicon.css"/> -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">
    <style>
      body {
        margin: 0;
        min-height: 100vh;
        background-image: url("./images/fantasyStories.jpg");
        background-attachment: fixed;
        background-repeat: no-repeat;
        background-size: cover;
      }
      
      .form-wrapper {
        width: 25%;
        /* max-height: 770px; */
        margin: 40px auto;
        padding: 20px;
        border-radius: 10px;
        background: #fff;
        box-shadow: 40px 15px 19px -7px rgba(59, 53, 53, 1);
        -webkit-box-shadow: 40px 15px 19px -7px rgba(59, 53, 53, 1);
        -moz-box-shadow: 40px 15px 19px -7px rgba(59, 53, 53, 1);
      }
      
      .form-wrapper .inner-wrap {
        margin-bottom: 15px;
        padding: 20px;
        border-radius: 6px;
        border: 2px solid gray;
        background: #ecebeb;
      }
      
      .form-wrapper h1 {
        margin: -20px -20px 20px -20px;
        padding: 20px 30px 15px 30px;
        color: rgb(14, 13, 13);
        font-size: 3rem;
        font-weight: 100;
        font-family: 'Creepster', cursive;
        border: 1px solid#e71313;
        border-radius: 10px 10px 0 0;
        background: #e71313;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.12);
        box-shadow: 24px 15px 19px -7px rgba(59, 53, 53, 0.74);
        -webkit-box-shadow: 24px 15px 19px -7px rgba(59, 53, 53, 0.74);
        -moz-box-shadow: 24px 15px 19px -7px rgba(59, 53, 53, 0.74);
      }
      
      .form-wrapper h1>span {
        display: block;
        margin-top: 1px;
        font-size: 14px;
        font-family: Georgia, 'Times New Roman', Times, serif;
      }
      
      .form-wrapper label {
        display: block;
        margin-bottom: 15px;
        color: #888;
        font-size: 13px;
        font-family: Georgia, 'Times New Roman', Times, serif;
      }
      
      #form-btn {
        font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
      }
      
      #form-btn:disabled {
        color: white;
        background-color: gray;
      }
      
      .form-wrapper input,
      .form-wrapper textarea,
      .form-wrapper select {
        display: block;
        width: 100%;
        padding: 8px;
        border-radius: 6px;
        border: 2px solid rgb(142, 139, 139);
        box-shadow: inset 0px 1px 1px rgba(0, 0, 0, 0.33);
        box-sizing: border-box;
      }
      
      .form-wrapper .section {
        margin-bottom: 5px;
        color: #e71313;
        font-size: 20px;
        font-weight: normal;
        font-family:"Bitter", serif;
      }
      
      .form-wrapper .section span {
        position: absolute;
        margin-top: -3px;
        margin-left: -45px;
        padding: 5px 10px 5px 10px;
        color: #fff;
        font-size: 14px;
        border-radius: 33%;
        border: 4px solid #fff;
        background: #e71313;
      }
      
      .form-wrapper input[type="button"],
      .form-wrapper input[type="submit"] {
        padding: 8px 20px 8px 20px;
        color: rgb(33, 31, 31);
        font-size: 15px;
        font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        border-radius: 5px;
        border: 1px solid #257c9e;
        background: #e71313;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.12);
        box-shadow: inset 0px 2px 2px 0px rgba(255, 255, 255, 0.17);
      }
      
      .form-wrapper input[type="button"]:hover,
      .form-wrapper input[type="submit"]:hover {
        background: #e71313;
        box-shadow: inset 0px 2px 2px 0px rgba(255, 255, 255, 0.28);
      }
      
      .form-wrapper .p {
        float: right;
        width: 250px;
        margin-top: 10px;
        color: #4d4d4d;
        font-size: 12px;
        font-family: Georgia, 'Times New Roman', Times, serif;
        text-align: right;
      }

      #main {
        padding-bottom: 40px;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
      }
        
      #side-wrapper {
        width: 60%;
        display: block;
        align-items: center;
      }
      
      #preview-list {
        width: 80%;
        min-height: 20%;
        margin: auto;
        margin-top: 40px;
        /* border-radius: 0 0 10px 10px; */
        border-radius: 10px;
        background-color: white;
        box-shadow: 40px 15px 19px -7px rgba(59, 53, 53, 1);
        -webkit-box-shadow: 40px 15px 19px -7px rgba(59, 53, 53, 1);
        -moz-box-shadow: 40px 15px 19px -7px rgba(59, 53, 53, 1);
      }
      
      #preview-list h3 {
        padding: 20px 10px 15px 10px;
        color: rgb(0, 0, 0);
        font-size: 30px;
        font-weight: 100;
        font-family: 'Creepster', cursive;
        border-radius: 10px 10px 0 0;
        border: 1px solid #e71313;
        background: #e71313;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.12);
        box-shadow: inset 0px 2px 2px 0px rgba(255, 255, 255, 0.17);
      }
      
      .edit-btn,
      .save-btn,
      .delete-btn {
        /* padding: 4px 3px 4px 13px; */
        margin: 10px 0px 0px 50px;
        padding: 10px 50px;
        color: rgb(0, 0, 0);
        font-size: 15px;
        border-radius: 5px;
        border: 1px solid #000000;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.12);
        font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        box-shadow: inset 0px 2px 2px 0px rgba(255, 255, 255, 0.17);
        background: #e71313;
      }
      
      .edit-btn:hover,
      .save-btn:hover,
      .delete-btn:hover {
        background: #ffffff;
        box-shadow: inset 0px 2px 2px 0px rgba(255, 255, 255, 0.28);
      }
      
      #preview-list {
        list-style-type: none;
        min-width: 60%;
        padding: 0;
      }
      
      .story-info {
        padding: 5px;
        font-size: 20px;
      }
      
      .story-info h4 {
        margin: 10px 0 10px 0;
        color: #e71313;
        font-size: 35px;
        font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
      }
      
      .story-info p {
        margin: 5px;
        color: #888;
        font-size: 22px;
      }
      
      .story-info p:last-child {
        font-size: 20px;
        border-top: 1px solid black;
      }
    </style>
  </head>
  <body>
    <div id="main">
      <div class="form-wrapper">
        <h1>
          Write your scary story
          <span>Fill the author information, genre and the story text!</span>
        </h1>
        <form>
          <div class="section"><span>&#9753;</span>Author Information</div>
          <div class="inner-wrap">
            <label>First Name: <input type="text" id="first-name" name="field1" /></label>
            <label>Last Name: <input type="text" id="last-name" name="field2" /></label>
            <label>Age: <input type="number" id="age" name="field3" /></label>
            </label>
            <label>Story Title:
              <input type="text" id="story-title" name="field5" />
            </label>
            <label>Genre:
              <select name="field4" id="genre">
                <option value="Disturbing">Disturbing</option>
                <option value="Psychological">Psychological</option>
                <option value="Killer">Killer</option>
                <option value="Monsters">Monsters</option>
                <option value="Paranormal">Paranormal</option>
              </select>
          </div>
  
          <div class="section"><span>&#9753;</span>Story</div>
          <div class="inner-wrap">
            <label for="story">Your Story:</label>
            <textarea id="story" name="story" rows="6" cols="50"></textarea>
          </div>
          <div class="button-section">
            <input type="button" id="form-btn" value="Publish" />
          </div>
        </form>
      </div>
      <div id="side-wrapper">
        <ul id="preview-list">
          <h3>Preview</h3>
        </ul>
      </div>
    </div>

    <script>
      window.addEventListener("load", solve);

function solve() {
  let firstNameElement = document.getElementById("first-name");
  let lastNameElement = document.getElementById("last-name");
  let ageElement = document.getElementById("age");
  let storyTitleElement = document.getElementById("story-title");
  let genreElement = document.getElementById("genre");
  let storyElement = document.getElementById("story");
  let publishBtnElement = document.getElementById("form-btn");
  let previewUlElement = document.getElementById("preview-list");
  let mainElement = document.getElementById("main");
  let bodyElement = document.querySelector(".body");

  firstNameElement.value = "jogata";
  lastNameElement.value = "nikolov";
  ageElement.value = 5;
  storyTitleElement = "title";
  storyElement.value = "text";

  publishBtnElement.addEventListener('click', onPublish);
  function onPublish(e) {
    e.preventDefault();
    // console.log(firstNameElement);
    // console.log(lastNameElement);
    // console.log(ageElement);
    // console.log(storyTitleElement);
    // console.log(storyElement);

    if (firstNameElement.value == ''
      || lastNameElement.value == ''
      || ageElement.value == ''
      || storyTitleElement.value == ''
      || storyElement.value == '') {
      return;
    }

    let liElement = document.createElement("li");
    liElement.setAttribute('class', 'story-info');

    let articleElement = document.createElement("article");

    let fullName = document.createElement("h4");
    fullName.textContent = `Name: ${firstNameElement.value} ${lastNameElement.value}`;

    let Age = document.createElement("p");
    Age.textContent = `Age: ${ageElement.value}`;

    let StoryTitle = document.createElement("p");
    StoryTitle.textContent = `Title: ${storyTitleElement.value}`;

    let Genre = document.createElement("p");
    Genre.textContent = `Genre: ${genreElement.value}`;

    let StoryText = document.createElement("p");
    StoryText.textContent = `${storyElement.value}`;


    let saveBtn = document.createElement("button");
    saveBtn.setAttribute('class', 'save-btn');
    saveBtn.textContent = 'Save Story';

    let editBtn = document.createElement("button");
    editBtn.setAttribute('class', 'edit-btn');
    editBtn.textContent = 'Edit Story';

    let deleteBtn = document.createElement("button");
    deleteBtn.setAttribute('class', 'delete-btn');
    deleteBtn.textContent = 'Delete Story';

    articleElement.appendChild(fullName);
    articleElement.appendChild(Age);
    articleElement.appendChild(StoryTitle);
    articleElement.appendChild(Genre);
    articleElement.appendChild(StoryText);

    liElement.appendChild(articleElement);
    liElement.appendChild(saveBtn);
    liElement.appendChild(editBtn);
    liElement.appendChild(deleteBtn);

    previewUlElement.appendChild(liElement);


    let editFirstName = firstNameElement.value;
    let editLastName = lastNameElement.value;
    let editAge = ageElement.value;
    let editTitle = storyTitleElement.value;
    let editStory = storyElement.value;

    firstNameElement.value = "";
    lastNameElement.value = "";
    ageElement.value = "";
    storyTitleElement.value = "";
    storyElement.value = "";

    publishBtnElement.disabled = true;

    saveBtn.addEventListener("click", onSave);
    function onSave() {
      mainElement.remove();
      let h1Saved = document.createElement("h1");
      h1Saved.textContent = "Your scary story is saved!";
      let bodyElement2 = document.createElement("div");
      bodyElement2.setAttribute('id', 'main');
      bodyElement.appendChild(bodyElement2);

      bodyElement2.appendChild(h1Saved);
    }

    editBtn.addEventListener("click", onEdit);
    function onEdit() {
      firstNameElement.value = editFirstName;
      lastNameElement.value = editLastName;
      ageElement.value = editAge;
      storyTitleElement.value = editTitle;
      storyElement.value = editStory;

      liElement.remove();

      publishBtnElement.disabled = false;
    }

    deleteBtn.addEventListener("click", onDelete);
    function onDelete() {
      liElement.remove();
      publishBtnElement.disabled = false;
    }

  }

}
    </script>
  
    <script>
      const chooseYourCarObj = {
    choosingType(type, color, year) {
        if (year < 1900 || year > 2022) {
            throw new Error(`Invalid Year!`);
        } else {
            if (type == "Sedan") {
              
              if (year >= 2010) {
                  return `This ${color} ${type} meets the requirements, that you have.`;
              } else {
                  return `This ${type} is too old for you, especially with that ${color} color.`;
              }

            }

            throw new Error(`This type of car is not what you are looking for.`);

        }
    },

    brandName(brands, brandIndex) {

        let result = [];

        if (!Array.isArray(brands) || !Number.isInteger(brandIndex) || brandIndex < 0 || brandIndex >= brands.length) {
            throw new Error("Invalid Information!");
        }
        for (let i = 0; i < brands.length; i++) {
            if (i !== brandIndex) {
                result.push(brands[i]);
            }
        }
        return result.join(", ");
    },

    carFuelConsumption(distanceInKilometers, consumptedFuelInLiters) {

        let litersPerHundredKm =((consumptedFuelInLiters / distanceInKilometers)* 100).toFixed(2);

        if (typeof distanceInKilometers !== "number" || distanceInKilometers <= 0 ||
            typeof consumptedFuelInLiters !== "number" || consumptedFuelInLiters <= 0) {
            throw new Error("Invalid Information!");
        } else if (litersPerHundredKm <= 7) {
            return `The car is efficient enough, it burns ${litersPerHundredKm} liters/100 km.`;
        } else {
            return `The car burns too much fuel - ${litersPerHundredKm} liters!`;
        }
    }
}
    </script>
    <script>
      // let expect = require('chai').expect;
// let chooseYourCar = require('./chooseYourCar');


// describe('car tests', () => {
//     it('choosingType', () => {
//         expect(() => { chooseYourCar.choosingType('Sedan', 'black', 1899) }).to.throw('Invalid Year!');
//         expect(() => { chooseYourCar.choosingType('Sedan', 'black', 2023) }).to.throw('Invalid Year!');
//         expect(() => { chooseYourCar.choosingType('SUV', 'black', 2020) }).to.throw('This type of car is not what you are looking for.');
//         expect(chooseYourCar.choosingType('Sedan', 'red', 2010)).to.equal('This red Sedan meets the requirements, that you have.');
//         expect(chooseYourCar.choosingType('Sedan', 'green', 1999)).to.equal('This Sedan is too old for you, especially with that green color.');      
//     });

//     it('brandName', () => {
//         expect(() => { chooseYourCar.brandName('Mazda', 1) }).to.throw('Invalid Information!');
//         expect(() => { chooseYourCar.brandName(['Mazda'], 'a') }).to.throw('Invalid Information!');
//         expect(() => { chooseYourCar.brandName(['Mazda'], 3.1) }).to.throw('Invalid Information!');
//         expect(() => { chooseYourCar.brandName(['Mazda'], 1) }).to.throw('Invalid Information!');
//         expect(() => { chooseYourCar.brandName(['Mazda'], -1) }).to.throw('Invalid Information!');
//         expect(chooseYourCar.brandName(['Mazda', 'BMW', 'Mercedes'], 1)).to.equal('Mazda, Mercedes');

//     });

//     it('carFuelConsumption', () => {
//         expect(() => { chooseYourCar.carFuelConsumption('5', '5') }).to.throw('Invalid Information!');
//         expect(() => { chooseYourCar.carFuelConsumption(5, '5') }).to.throw('Invalid Information!');
//         expect(() => { chooseYourCar.carFuelConsumption('5', 5) }).to.throw('Invalid Information!');
//         expect(() => { chooseYourCar.carFuelConsumption(0, 5) }).to.throw('Invalid Information!');
//         expect(() => { chooseYourCar.carFuelConsumption(5, -1) }).to.throw('Invalid Information!');
//         expect(chooseYourCar.carFuelConsumption(50, 5)).to.equal('The car burns too much fuel - 10.00 liters!'); 
//         expect(chooseYourCar.carFuelConsumption(50, 3)).to.equal('The car is efficient enough, it burns 6.00 liters/100 km.'); 
//         expect(chooseYourCar.carFuelConsumption(50, 10)).to.equal('The car burns too much fuel - 20.00 liters!'); 
//         expect(chooseYourCar.carFuelConsumption(100, 7)).to.equal('The car is efficient enough, it burns 7.00 liters/100 km.');      

//     });

// });
    </script>
          <script>
            // 04. Storage
      
      function createStorage(params) {
      // console.log(params);
      const storage = new Map();
      
      for (const input of params) {
        // console.log(input);
        const data = input.split(" ");
        // console.log(data);
        const product = data[0];
        // console.log(product);
        const q = Number(data[1]);
        // console.log(q);
      
        if (!storage.has(product)) {
          storage.set(product, 0);
        }
      
        const newQ = storage.get(product) + q;
        // console.log(newQ);
        storage.set(product, newQ);
      }
      // console.log(storage);
      for (const [product, q] of storage) {
        console.log(`${product} -> ${q}`);
      }
      }
      
      // createStorage(['tomatoes 10', 'coffee 5', 'olives 100', 'coffee 40']);
      // createStorage(['apple 50', 'apple 61', 'coffee 115', 'coffee 40']);
    </script>

    <h1 hidden>URLSearchParams in JavaScript - Constructing Query Strings</h1>
        
    <script src="./in-fetch-api.js"></script>
    <script src="js.js">
      // Create Query String as String
      const queryStringSample = 'name=Dom&age=36&occupation=Software+Developer';
      // Create URLSearchParams Object from String
      const uspFromString = new URLSearchParams(queryStringSample);
      console.log(uspFromString);


      // Create Query String as Object
      const queryStringSampleAsObject = {
        name: 'Dom',
        age: 36,
        occupation: 'Software Developer',
      };

      // Create URLSearchParams Object from Object
      const uspFromObject = new URLSearchParams(queryStringSampleAsObject);

      // Get Param from URLSearchParams
      const name = uspFromObject.get('name');
      console.log(`Value of 'name': ${name}`);

      // Change Param in URLSearchParams
      uspFromObject.set('name', 'New Name');
      // Set New Param in URLSearchParams
      uspFromObject.set('programming language', 'JavaScript');

      for (const [key, value] of uspFromObject) {
        console.log(`${key} => ${value}`);
      }

      // Convert URLSearchParams Object to Query String
      console.log(uspFromString.toString());
      console.log(uspFromObject.toString());
    </script>
  </body>
</html>