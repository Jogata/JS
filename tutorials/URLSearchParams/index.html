<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>URLSearchParams in JS</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  </head>
  <body>
    <h1>URLSearchParams in JavaScript - Constructing Query Strings</h1>

    <script src="./in-fetch-api.js"></script>
    <script src="js.js">
      // Create Query String as String
      const queryStringSample = 'name=Dom&age=36&occupation=Software+Developer';
      // Create URLSearchParams Object from String
      const uspFromString = new URLSearchParams(queryStringSample);
      console.log(uspFromString);


      // Create Query String as Object
      const queryStringSampleAsObject = {
        name: 'Dom',
        age: 36,
        occupation: 'Software Developer',
      };

      // Create URLSearchParams Object from Object
      const uspFromObject = new URLSearchParams(queryStringSampleAsObject);

      // Get Param from URLSearchParams
      const name = uspFromObject.get('name');
      console.log(`Value of 'name': ${name}`);

      // Change Param in URLSearchParams
      uspFromObject.set('name', 'New Name');
      // Set New Param in URLSearchParams
      uspFromObject.set('programming language', 'JavaScript');

      for (const [key, value] of uspFromObject) {
        console.log(`${key} => ${value}`);
      }

      // Convert URLSearchParams Object to Query String
      console.log(uspFromString.toString());
      console.log(uspFromObject.toString());
    </script>

    <script>
            // 03. The Pianist

            function organizePieces(params) {
        const pieces = [];
        const n = Number(params[0]);

        for (let index = 1; index <= n; index++) {
          const rawData = params[index];
          // console.log(rawData);
          if (rawData == "Stop") {
            // console.log("break");
            return;
          }
          const data = rawData.split("|");
          pieces.push(data);
        }

        for (let index = n + 1; index < params.length; index++) {
          const rawData = params[index];
          const data = rawData.split("|");
          const operation = data[0];
          const pieceName = data[1];

          if (operation == "Add") {
            // console.log("Add");
            let has = false;
            for (const piece of pieces) {
              // console.log(pieceName, piece[0]);
              if (pieceName == piece[0]) {
                has = true;
              }
            }
            if (has) {
              console.log(`${pieceName} is already in the collection!`);
            } else {
              console.log(`${pieceName} by ${data[2]} in ${data[3]} added to the collection!`);
              const pieceInfo = data.slice(1);
              pieces.push(pieceInfo);
            }
          } else if (operation == "Remove") {
            // console.log("Remove");
            let has = false;
            for (let index = 0; index < pieces.length; index++) {
              // console.log(pieceName, piece[0]);
              if (pieceName == pieces[index][0]) {
                pieces.splice(index, 1);
                has = true;
              }
            }
            if (has) {
              console.log(`Successfully removed ${pieceName}!`);
            } else {
              console.log(`Invalid operation! ${pieceName} does not exist in the collection.`);
            }
          } else if (operation == "ChangeKey") {
            // console.log("ChangeKey");
            for (let index = 0; index < pieces.length; index++) {
              // console.log(pieceName, piece[0]);
              if (pieceName == pieces[index][0]) {
                pieces[index][2] = data[2];
                has = true;
              }
            }
            if (has) {
              console.log(`Changed the key of ${pieceName} to ${data[2]}!`);
            } else {
              console.log(`Invalid operation! ${pieceName} does not exist in the collection.`);
            }
          } else if (operation == "Stop") {
            // console.log("Stop");
            for (const piece of pieces) {
              console.log(`${piece[0]} -> Composer: ${piece[1]}, Key: ${piece[2]}`);
              // console.log(pieceName);
            }
          }

        }
      }

      // organizePieces(['3', 'Fur Elise|Beethoven|A Minor', 'Moonlight Sonata|Beethoven|C# Minor', 'Clair de Lune|Debussy|C# Minor', 'Add|Sonata No.2|Chopin|B Minor', 'Add|Hungarian Rhapsody No.2|Liszt|C# Minor', 'Add|Fur Elise|Beethoven|C# Minor', 'Remove|Clair de Lune', 'ChangeKey|Moonlight Sonata|C# Major', 'Stop']);
      // organizePieces(['4', 'Eine kleine Nachtmusik|Mozart|G Major', 'La Campanella|Liszt|G# Minor', 'The Marriage of Figaro|Mozart|G Major', 'Hungarian Dance No.5|Brahms|G Minor', 'Add|Spring|Vivaldi|E Major', 'Remove|The Marriage of Figaro', 'Remove|Turkish March', 'ChangeKey|Spring|C Major', 'Add|Nocturne|Chopin|C# Minor', 'Stop']);
      // organizePieces(["4", "1|2|3", "4|5|6", "7|8|9", "0|0|0", "Stop"]);
    </script>
    <script>
      // 01. SoftUni Reception

      function reception(params) {
        const f = Number(params[0]);
        const s = Number(params[1]);
        const t = Number(params[2]);

        let students = Number(params[3]);

        const total = f + s + t;
        // let time = 0;

        // let time = students / total;

        // let breaks = time / 3;

        // if (time >= 3) {
          // time++;
        // }

        // breaks = Math.floor(breaks);
        // console.log(breaks);

        // time = time + breaks;

        // time = Math.ceil(time);

        // if (total * 3 * breaks == students) {
        //   time--;
        // }

        let time = 0;
        let breakTime = 0;

        while (students >= total) {
          students = students - total;
          time++;
          breakTime++;
          
          console.log(students, time);

          if (breakTime % 3 == 0 && students > 0) {
            time++;
            breakTime = 0;
          }
          
        }

        if (students > 0) {
          time++;
        }

        console.log(`Time needed: ${time}h.`);

      }

      reception(['5','6','4','20']);
      reception(['1','2','3','45']);
      reception(['3','2','5','40']);
      reception(['3','2','5','60']);

      // 02. Array Modifier
      // 03. Numbers
    </script>
  </body>
</html>