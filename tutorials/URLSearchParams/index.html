<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>URLSearchParams in JS</title>
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@3.2.0/fonts/remixicon.css"/> -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">  
  </head>
  <body>
    <div id="main">
      <div class="form-wrapper">
        <h1>
          Write your scary story
          <span>Fill the author information, genre and the story text!</span>
        </h1>
        <form>
          <div class="section"><span>&#9753;</span>Author Information</div>
          <div class="inner-wrap">
            <label>First Name: <input type="text" id="first-name" name="field1" /></label>
            <label>Last Name: <input type="text" id="last-name" name="field2" /></label>
            <label>Age: <input type="number" id="age" name="field3" /></label>
            </label>
            <label>Story Title:
              <input type="text" id="story-title" name="field5" />
            </label>
            <label>Genre:
              <select name="field4" id="genre">
                <option value="Disturbing">Disturbing</option>
                <option value="Psychological">Psychological</option>
                <option value="Killer">Killer</option>
                <option value="Monsters">Monsters</option>
                <option value="Paranormal">Paranormal</option>
              </select>
          </div>
  
          <div class="section"><span>&#9753;</span>Story</div>
          <div class="inner-wrap">
            <label for="story">Your Story:</label>
            <textarea id="story" name="story" rows="6" cols="50"></textarea>
          </div>
          <div class="button-section">
            <input type="button" id="form-btn" value="Publish" />
          </div>
        </form>
      </div>
      <div id="side-wrapper">
        <ul id="preview-list">
          <h3>Preview</h3>
        </ul>
      </div>
    </div>
  
    <script>
      const chooseYourCar = {
    choosingType(type, color, year) {
        if (year < 1900 || year > 2022) {
            throw new Error(`Invalid Year!`);
        } else {
            if (type == "Sedan") {
              
              if (year >= 2010) {
                  return `This ${color} ${type} meets the requirements, that you have.`;
              } else {
                  return `This ${type} is too old for you, especially with that ${color} color.`;
              }

            }

            throw new Error(`This type of car is not what you are looking for.`);

        }
    },

    brandName(brands, brandIndex) {

        let result = [];

        if (!Array.isArray(brands) || !Number.isInteger(brandIndex) || brandIndex < 0 || brandIndex >= brands.length) {
            throw new Error("Invalid Information!");
        }
        for (let i = 0; i < brands.length; i++) {
            if (i !== brandIndex) {
                result.push(brands[i]);
            }
        }
        return result.join(", ");
    },

    carFuelConsumption(distanceInKilometers, consumptedFuelInLiters) {

        let litersPerHundredKm =((consumptedFuelInLiters / distanceInKilometers)* 100).toFixed(2);

        if (typeof distanceInKilometers !== "number" || distanceInKilometers <= 0 ||
            typeof consumptedFuelInLiters !== "number" || consumptedFuelInLiters <= 0) {
            throw new Error("Invalid Information!");
        } else if (litersPerHundredKm <= 7) {
            return `The car is efficient enough, it burns ${litersPerHundredKm} liters/100 km.`;
        } else {
            return `The car burns too much fuel - ${litersPerHundredKm} liters!`;
        }
    }
}
    </script>
    <script>
      let expect = require('chai').expect;
let chooseYourCar = require('./chooseYourCar');


describe('car tests', () => {
    it('choosingType', () => {
        expect(() => { chooseYourCar.choosingType('Sedan', 'black', 1899) }).to.throw('Invalid Year!');
        expect(() => { chooseYourCar.choosingType('Sedan', 'black', 2023) }).to.throw('Invalid Year!');
        expect(() => { chooseYourCar.choosingType('SUV', 'black', 2020) }).to.throw('This type of car is not what you are looking for.');
        expect(chooseYourCar.choosingType('Sedan', 'red', 2010)).to.equal('This red Sedan meets the requirements, that you have.');
        expect(chooseYourCar.choosingType('Sedan', 'green', 1999)).to.equal('This Sedan is too old for you, especially with that green color.');      
    });

    it('brandName', () => {
        expect(() => { chooseYourCar.brandName('Mazda', 1) }).to.throw('Invalid Information!');
        expect(() => { chooseYourCar.brandName(['Mazda'], 'a') }).to.throw('Invalid Information!');
        expect(() => { chooseYourCar.brandName(['Mazda'], 3.1) }).to.throw('Invalid Information!');
        expect(() => { chooseYourCar.brandName(['Mazda'], 1) }).to.throw('Invalid Information!');
        expect(() => { chooseYourCar.brandName(['Mazda'], -1) }).to.throw('Invalid Information!');
        expect(chooseYourCar.brandName(['Mazda', 'BMW', 'Mercedes'], 1)).to.equal('Mazda, Mercedes');

    });

    it('carFuelConsumption', () => {
        expect(() => { chooseYourCar.carFuelConsumption('5', '5') }).to.throw('Invalid Information!');
        expect(() => { chooseYourCar.carFuelConsumption(5, '5') }).to.throw('Invalid Information!');
        expect(() => { chooseYourCar.carFuelConsumption('5', 5) }).to.throw('Invalid Information!');
        expect(() => { chooseYourCar.carFuelConsumption(0, 5) }).to.throw('Invalid Information!');
        expect(() => { chooseYourCar.carFuelConsumption(5, -1) }).to.throw('Invalid Information!');
        expect(chooseYourCar.carFuelConsumption(50, 5)).to.equal('The car burns too much fuel - 10.00 liters!'); 
        expect(chooseYourCar.carFuelConsumption(50, 3)).to.equal('The car is efficient enough, it burns 6.00 liters/100 km.'); 
        expect(chooseYourCar.carFuelConsumption(50, 10)).to.equal('The car burns too much fuel - 20.00 liters!'); 
        expect(chooseYourCar.carFuelConsumption(100, 7)).to.equal('The car is efficient enough, it burns 7.00 liters/100 km.');      

    });

});
    </script>
    <h1 hidden>URLSearchParams in JavaScript - Constructing Query Strings</h1>
        
    <script src="./in-fetch-api.js"></script>
    <script src="js.js">
      // Create Query String as String
      const queryStringSample = 'name=Dom&age=36&occupation=Software+Developer';
      // Create URLSearchParams Object from String
      const uspFromString = new URLSearchParams(queryStringSample);
      console.log(uspFromString);


      // Create Query String as Object
      const queryStringSampleAsObject = {
        name: 'Dom',
        age: 36,
        occupation: 'Software Developer',
      };

      // Create URLSearchParams Object from Object
      const uspFromObject = new URLSearchParams(queryStringSampleAsObject);

      // Get Param from URLSearchParams
      const name = uspFromObject.get('name');
      console.log(`Value of 'name': ${name}`);

      // Change Param in URLSearchParams
      uspFromObject.set('name', 'New Name');
      // Set New Param in URLSearchParams
      uspFromObject.set('programming language', 'JavaScript');

      for (const [key, value] of uspFromObject) {
        console.log(`${key} => ${value}`);
      }

      // Convert URLSearchParams Object to Query String
      console.log(uspFromString.toString());
      console.log(uspFromObject.toString());
    </script>
  </body>
</html>